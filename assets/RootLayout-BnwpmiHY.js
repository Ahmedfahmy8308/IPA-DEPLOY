import{i as w,r as i,j as e,u as L,L as d,A as k,o as C,X as S,O as I,p as A,a as E}from"./index-C_fr4Erx.js";import{u as M}from"./useQuery-BRWOpF1S.js";import{B as f}from"./button-BPxerCch.js";import{u as N}from"./useTranslation-JReWgE5Y.js";import{C as O}from"./chevron-up-Dy2-eoV2.js";import{C as D}from"./chevron-down-D0hNMIBc.js";import{U as b}from"./user-Rz5BT_eB.js";import{S as y}from"./settings-DmzB8q4_.js";import{L as v,M as U}from"./menu-DGwCjKJV.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=w("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),j=()=>{const{i18n:a,t}=N(),[x,n]=i.useState(!1),r=i.useRef(null),u=a.language;i.useEffect(()=>{const o=m=>{r.current&&!r.current.contains(m.target)&&n(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const l=o=>{a.changeLanguage(o);const m=o==="ar"?"rtl":"ltr";document.documentElement.dir=m,document.documentElement.lang=o,n(!1)};return e.jsxs("div",{className:"relative",ref:r,children:[e.jsxs(f,{variant:"ghost",size:"sm",className:"flex items-center gap-1 text-gray-600 hover:text-[#0449aa]",onClick:()=>n(!x),children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:t(u==="en"?"language.english":"language.arabic")}),x?e.jsx(O,{className:"h-4 w-4"}):e.jsx(D,{className:"h-4 w-4"})]}),x&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-50 py-1",children:e.jsxs("div",{className:"py-1",children:[e.jsx("button",{onClick:()=>l("en"),className:`w-full text-left block px-4 py-2 text-sm ${u==="en"?"bg-gray-100 text-[#0449aa]":"text-gray-700"} hover:bg-gray-100`,children:"English"}),e.jsx("button",{onClick:()=>l("ar"),className:`w-full text-left block px-4 py-2 text-sm ${u==="ar"?"bg-gray-100 text-[#0449aa]":"text-gray-700"} hover:bg-gray-100`,children:"العربية"})]})})]})},T=()=>{const{t:a}=N(),[t,x]=i.useState({name:"",role:"",email:"",isLoggedIn:!1}),[n,r]=i.useState(!1),[u,l]=i.useState(!1),o=i.useRef(null),m=i.useRef(null),g=L(),{data:h}=M({queryKey:["generalInfo"],queryFn:async()=>{const s=await fetch(`${E}GeneralInfo`);if(!s.ok)throw new Error("Failed to fetch general info");return(await s.json()).data}});i.useEffect(()=>{const s=localStorage.getItem("userData");if(s){const c=JSON.parse(s);x({name:c.firstName,role:c.role,email:c.email,isLoggedIn:!0})}},[]),i.useEffect(()=>{const s=c=>{o.current&&!o.current.contains(c.target)&&l(!1),m.current&&n&&!m.current.contains(c.target)&&r(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[n]);const p=async()=>{try{await A(),x({name:"",role:"",email:"",isLoggedIn:!1}),l(!1),r(!1),g("/login")}catch(s){console.error("Logout failed:",s),g("/login")}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("nav",{className:"bg-white shadow-md sticky top-0 z-50",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16 items-center",children:[e.jsx(d,{to:"/",className:"flex items-center hover:scale-105 transition-transform",children:e.jsx("img",{src:`${k}/${h==null?void 0:h.headerLogoUrl}`,alt:"Logo",className:"h-10 w-auto"})}),e.jsx("div",{className:"hidden sm:flex sm:space-x-8",children:["home","about","courses","events","gallery","FAQ","contact"].map(s=>e.jsx(C,{to:`/${s==="home"?"":s}`,className:({isActive:c})=>`inline-flex items-center px-1 pt-1 text-sm font-semibold border-b-2 
                    ${c?"border-[#0449aa] text-[#0449aa]":"border-transparent text-gray-700 hover:text-[#0449aa]"} 
                    hover:border-[#0449aa] transition-all duration-300`,children:a(`navigation.${s.toLowerCase()}`)},s))}),e.jsxs("div",{className:"hidden sm:flex sm:items-center sm:space-x-4",children:[e.jsx(j,{}),t.isLoggedIn?e.jsxs("div",{className:"relative",ref:o,children:[e.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer group",onClick:()=>l(!u),children:[e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.role})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-r from-blue-500 to-blue-300 text-white font-medium flex items-center justify-center",children:t.name.charAt(0).toUpperCase()})})]}),u&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl border border-gray-100 z-50 py-1 overflow-hidden transition-all duration-300 transform origin-top-right",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.email})]}),t.role==="Student"&&e.jsxs("div",{onClick:()=>{g("/userprof"),l(!1)},className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 cursor-pointer transition-colors duration-200",children:[e.jsx(b,{className:"w-4 h-4 mr-3 text-gray-400"}),a("auth.profile")]}),t.role==="Student"&&e.jsxs("div",{onClick:()=>{g("/ELMS"),l(!1)},className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 cursor-pointer",children:[e.jsx("svg",{className:"w-4 h-4 mr-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"ELMS"]}),(t.role==="Admin"||t.role==="SuperAdmin")&&e.jsxs("div",{onClick:()=>{g("/admin",{state:{directAdminNavigation:!0}}),l(!1)},className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 cursor-pointer transition-colors duration-200",children:[e.jsx(y,{className:"w-4 h-4 mr-3 text-gray-400"}),a("auth.adminDashboard")]}),e.jsxs("div",{onClick:p,className:"flex items-center px-4 py-3 text-sm text-red-600 hover:bg-red-50 cursor-pointer transition-colors duration-200",children:[e.jsx(v,{className:"w-4 h-4 mr-3 text-red-400"}),a("auth.logout")]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{variant:"ghost",asChild:!0,className:"hover:bg-[#0449aa1a] text-[#0449aa]",children:e.jsx(d,{to:"/login",children:a("auth.signIn")})}),e.jsx(f,{asChild:!0,className:"bg-[#0449aa] hover:bg-[#033a88] transition-colors duration-300",children:e.jsx(d,{to:"/register",children:a("auth.getStarted")})})]})]}),e.jsx("div",{className:"flex sm:hidden",children:e.jsx("button",{onClick:()=>r(!n),className:"p-2 rounded-md text-gray-700 hover:text-[#0449aa] hover:bg-gray-100 transition-colors duration-300","aria-label":"Toggle menu",children:n?e.jsx(S,{className:"h-6 w-6"}):e.jsx(U,{className:"h-6 w-6"})})})]})}),e.jsx("div",{ref:m,className:`sm:hidden fixed inset-0 z-40 bg-white transform transition-all duration-300 ease-in-out ${n?"translate-x-0":"-translate-x-full"}`,style:{top:"64px"},children:e.jsxs("div",{className:"h-full overflow-y-auto",children:[t.isLoggedIn&&e.jsxs("div",{className:"flex items-center px-6 py-4 border-b border-gray-200 bg-gray-50",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-blue-300 text-white font-medium flex items-center justify-center mr-3",children:t.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-800",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.email})]})]}),e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 mb-2",children:a("language.language")}),e.jsx(j,{mobile:!0})]}),e.jsxs("div",{className:"px-2 py-3 space-y-1",children:[["home","about","courses","events","contact","gallery","FAQ"].map(s=>e.jsx(d,{to:`/${s==="home"?"":s}`,onClick:()=>r(!1),className:"block px-4 py-3 text-base font-medium text-gray-700 hover:text-[#0449aa] hover:bg-blue-50 rounded-lg transition-colors duration-300 mx-2",children:a(`navigation.${s.toLowerCase()}`)},s)),t.isLoggedIn&&(t.role==="Admin"||t.role==="SuperAdmin")&&e.jsxs(d,{to:"/admin",onClick:()=>{r(!1),g("/admin",{state:{directAdminNavigation:!0}})},className:"flex items-center px-4 py-3 text-base font-medium text-gray-700 hover:text-[#0449aa] hover:bg-blue-50 rounded-lg transition-colors duration-300 mx-2",children:[e.jsx(y,{className:"w-5 h-5 mr-3 text-gray-400"}),a("auth.adminDashboard")]}),t.isLoggedIn&&t.role!=="Admin"&&t.role!=="SuperAdmin"&&e.jsxs(d,{to:"/userprof",onClick:()=>r(!1),className:"flex items-center px-4 py-3 text-base font-medium text-gray-700 hover:text-[#0449aa] hover:bg-blue-50 rounded-lg transition-colors duration-300 mx-2",children:[e.jsx(b,{className:"w-5 h-5 mr-3 text-gray-400"}),a("auth.profile")]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-6 py-4 bg-gray-50 border-t border-gray-200",children:t.isLoggedIn?e.jsxs("button",{onClick:p,className:"flex items-center justify-center w-full px-4 py-3 text-base font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-300",children:[e.jsx(v,{className:"w-5 h-5 mr-3 text-red-400"}),a("auth.logout")]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{to:"/login",onClick:()=>r(!1),className:"flex items-center justify-center px-4 py-3 text-base font-medium text-[#0449aa] hover:bg-blue-50 rounded-lg transition-colors duration-300",children:a("auth.signIn")}),e.jsx(d,{to:"/register",onClick:()=>r(!1),className:"flex items-center justify-center px-4 py-3 text-base font-medium text-white bg-[#0449aa] hover:bg-[#033a88] rounded-lg transition-colors duration-300",children:a("auth.getStarted")})]})})]})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 transition-opacity duration-300",onClick:()=>r(!1)}),e.jsx("main",{children:e.jsx(I,{})})]})};export{T as default};
