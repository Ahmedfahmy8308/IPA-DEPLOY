import{c as p,ad as j,t as b,A as h,j as e,o as v,a as N,r as n,u as w,O as y}from"./index-Cyiel408.js";import{u as L}from"./useQuery-CYrySqKS.js";import{L as k,A as S,a as I,b as E}from"./avatar-CLn9aj8o.js";import{B as C}from"./book-CN4dQfRG.js";import{C as M}from"./circle-check-big-BQTS-TST.js";import{B as A}from"./button-BnvV-wVG.js";import{M as O,L as D}from"./menu-BkwydiBm.js";import{C as U}from"./chevron-down-BnRArD8w.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=p("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);function u(...s){return j(b(s))}const c=({to:s,icon:t,label:o})=>e.jsxs(v,{to:s,className:({isActive:a})=>u("flex items-center gap-3 px-4 py-3 rounded-md mb-1 transition-colors text-white",a?"bg-sidebar-accent/35 text-white font-medium":"text-white hover:bg-sidebar-accent/50"),children:[e.jsx(t,{size:20}),e.jsx("span",{children:o})]}),z=({isOpen:s})=>{const{data:t}=L({queryKey:["generalInfo"],queryFn:async()=>{const a=await fetch(`${N}GeneralInfo`);if(!a.ok)throw new Error("Failed to fetch general info");return(await a.json()).data}}),o=t!=null&&t.headerLogoUrl?`${h}/${t.headerLogoUrl}`:`${h}/public/img/favicon.ico`;return e.jsx("div",{className:u("fixed left-0 top-0 h-full bg-blue-900 z-40 shadow-lg transition-all duration-300 ease-in-out text-white",s?"w-64":"w-0 overflow-hidden"),children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"h-16 flex items-center justify-center border-b border-sidebar-border",children:[e.jsx("img",{src:o,alt:"Logo",className:"h-10 w-auto mr-2",style:{maxHeight:40}}),e.jsx("span",{className:"text-xl font-bold text-white",children:"IPA ELMS"})]}),e.jsx("div",{className:"flex-1 py-6 px-3 overflow-y-auto",children:e.jsxs("nav",{className:"space-y-1",children:[e.jsx(c,{to:"/ELMS",icon:k,label:"Dashboard"}),e.jsx(c,{to:"/ELMS/course",icon:C,label:"Course Lessons"}),e.jsx(c,{to:"/ELMS/evaluation",icon:M,label:"Evaluation"}),e.jsx(c,{to:"/ELMS/ticket",icon:B,label:"Ticket"})]})})]})})},W=()=>{const[s,t]=n.useState(!0),[o,a]=n.useState(!1),[r,m]=n.useState({name:"",email:"",isLoggedIn:!1}),d=n.useRef(null),x=w();n.useEffect(()=>{const i=localStorage.getItem("userData");if(i){const l=JSON.parse(i);m({name:l.firstName||"",email:l.email||"",isLoggedIn:!0})}},[]),n.useEffect(()=>{const i=l=>{d.current&&!d.current.contains(l.target)&&a(!1)};return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[]);const f=()=>t(!s),g=async()=>{localStorage.removeItem("userData"),m({name:"",email:"",isLoggedIn:!1}),a(!1),x("/login")};return e.jsxs("div",{className:"min-h-screen flex bg-gray-50",children:[e.jsx(z,{isOpen:s}),e.jsxs("div",{className:`flex-1 transition-all duration-300 ease-in-out ${s?"ml-64":"ml-0"}`,children:[e.jsxs("header",{className:"bg-white border-b h-16 flex items-center justify-between px-4 shadow-sm sticky top-0 z-10",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{variant:"ghost",size:"icon",onClick:f,className:"mr-4 hover:bg-gray-100",children:e.jsx(O,{className:"h-5 w-5"})}),e.jsxs("h1",{className:"text-xl font-semibold text--800",children:["Welcome ",e.jsxs("span",{className:" text-blue-500",children:[" ",r.name||"User"]})]})]}),r.isLoggedIn&&e.jsx("div",{className:"flex items-center space-x-6",children:e.jsxs("div",{className:"relative",ref:d,children:[e.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer group",onClick:()=>a(!o),children:[e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800",children:r.name}),e.jsx("div",{className:"text-xs text-gray-500",children:r.email})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"h-8 w-8",children:e.jsx(I,{className:"bg-gradient-to-r from-blue-500 to-blue-300 text-white font-medium",children:r.name?r.name.charAt(0).toUpperCase():"?"})}),e.jsx(U,{className:`h-4 w-4 ml-1 text-gray-500 transition-transform duration-200 ${o?"rotate-180":""}`})]})]}),o&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl border border-gray-100 z-50 py-1 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:r.email})]}),e.jsxs("div",{onClick:()=>x("/"),className:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 cursor-pointer transition-colors duration-150",children:[e.jsx(E,{className:"w-4 h-4 mr-3 text-gray-400"}),"Back to Website"]}),e.jsxs("div",{onClick:g,className:"flex items-center px-4 py-3 text-sm text-red-600 hover:bg-red-50 cursor-pointer transition-colors duration-150",children:[e.jsx(D,{className:"w-4 h-4 mr-3 text-red-400"}),"Log Out"]})]})]})})]}),e.jsx("main",{className:"p-4 md:p-6",children:e.jsx(y,{})})]})]})};export{W as default};
