import{r,a as h,y as t,j as e}from"./index-DSbC69U8.js";import{B as o}from"./button-BanH1mNW.js";import{I as l}from"./input-CwdNmczo.js";import{C as B,a as J,c as U,b as y,d as _}from"./card-DdSnDD3U.js";import{T as q,a as G,b as p,c as d,d as K,e as c}from"./table-BXYXOQvI.js";import Q from"./DashboardLayout-CgZemHwQ.js";import{C as w}from"./ConfirmationDialog-DPAgyip4.js";import{P as V}from"./plus-CXEFMUXs.js";import{L as W}from"./lock-CkKgNgaE.js";import{T as X}from"./trash-2-BV8i9BA9.js";import"./avatar-0mFXGbEo.js";import"./chevron-down-aOoY2hDg.js";import"./menu-BwaHMtMR.js";import"./house-Sgp_2irf.js";import"./settings-CT5cNo8j.js";import"./user-Ik_QhwCc.js";import"./proxy-Cis1aWOO.js";import"./index-CPMrXLRy.js";const je=()=>{const[u,v]=r.useState([]),[I,x]=r.useState(!1),[a,n]=r.useState({firstName:"",lastName:"",email:"",address:"",password:""}),[P,i]=r.useState(!1),[S,g]=r.useState(null),[k,C]=r.useState(!1),[N,b]=r.useState(""),[E,T]=r.useState(null),[A,f]=r.useState(!1),[D,m]=r.useState(!1);r.useEffect(()=>{j()},[]);const j=async()=>{try{const s=await fetch(`${h}InstructorManagement`,{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch instructors");const R=await s.json();v(R.data)}catch{t.error("Could not load instructors")}},F=s=>{g(s),i(!0)},$=async()=>{try{if(!(await fetch(`${h}InstructorManagement/delete/${S}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete instructor");t.success("Instructor deleted successfully"),i(!1),g(null),j()}catch{t.error("Could not delete instructor"),i(!1)}},M=async()=>{f(!0)},L=async()=>{try{if(!(await fetch(`${h}InstructorManagement/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),credentials:"include"})).ok)throw new Error("Failed to add instructor");t.success("Instructor added successfully"),x(!1),n({firstName:"",lastName:"",email:"",address:"",password:""}),j()}catch{t.error("Could not add instructor")}finally{f(!1)}},z=s=>{T(s),m(!0)},H=async()=>{try{if(!(await fetch(`${h}InstructorManagement/change-password/${E}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPassword:N}),credentials:"include"})).ok)throw new Error("Failed to change password");t.success("Password changed successfully"),C(!1),b("")}catch{t.error("Could not change password")}finally{m(!1)}},O=()=>{m(!0)};return e.jsx(Q,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(B,{children:[e.jsx(J,{className:"border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(U,{className:"text-xl font-semibold",children:"Instructors Management"}),e.jsxs(o,{onClick:()=>x(!0),className:"gap-2",children:[e.jsx(V,{size:16}),"Add Instructor"]})]})}),I&&e.jsxs(y,{className:"pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"First Name"}),e.jsx(l,{placeholder:"Enter first name",value:a.firstName,onChange:s=>n({...a,firstName:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Last Name"}),e.jsx(l,{placeholder:"Enter last name",value:a.lastName,onChange:s=>n({...a,lastName:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx(l,{placeholder:"Enter email",value:a.email,onChange:s=>n({...a,email:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Address"}),e.jsx(l,{placeholder:"Enter address",value:a.address,onChange:s=>n({...a,address:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),e.jsx(l,{type:"password",placeholder:"Enter password",value:a.password,onChange:s=>n({...a,password:s.target.value})})]})]})]}),e.jsxs(_,{className:"flex justify-end gap-2 pt-6 border-t",children:[e.jsx(o,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(o,{onClick:M,className:"bg-blue-600 hover:bg-blue-700",children:"Add Instructor"})]})]}),e.jsx(y,{className:"p-0",children:e.jsxs(q,{children:[e.jsx(G,{children:e.jsxs(p,{children:[e.jsx(d,{className:"w-[80px]",children:"ID"}),e.jsx(d,{children:"Name"}),e.jsx(d,{children:"Email"}),e.jsx(d,{children:"Address"}),e.jsx(d,{className:"text-right",children:"Actions"})]})}),e.jsx(K,{children:u&&u.length>0?u.map(s=>e.jsxs(p,{children:[e.jsx(c,{children:s.id}),e.jsx(c,{className:"font-medium",children:`${s.firstName} ${s.lastName}`}),e.jsx(c,{children:s.email}),e.jsx(c,{children:s.address}),e.jsx(c,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>z(s.id),children:[e.jsx(W,{size:14,className:"mr-1"}),"Change Password"]}),e.jsxs(o,{variant:"destructive",size:"sm",onClick:()=>F(s.id),children:[e.jsx(X,{size:14,className:"mr-1"}),"Delete"]})]})})]},s.id)):e.jsx(p,{children:e.jsx(c,{colSpan:5,className:"text-center py-8 text-gray-500",children:"No instructors found."})})})]})})]}),P&&e.jsx(w,{message:"Are you sure you want to delete this instructor?",onConfirm:$,onCancel:()=>i(!1)}),k&&e.jsxs(Dialog,{children:[e.jsx(DialogHeader,{children:"Change Password"}),e.jsxs(DialogContent,{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"New Password"}),e.jsx(l,{type:"password",placeholder:"Enter new password",value:N,onChange:s=>b(s.target.value)})]}),e.jsxs(DialogFooter,{children:[e.jsx(o,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(o,{onClick:O,className:"bg-blue-600 hover:bg-blue-700",children:"Confirm"})]})]}),A&&e.jsx(w,{message:"Are you sure you want to add this instructor?",onConfirm:L,onCancel:()=>f(!1)}),D&&e.jsx(w,{message:"Are you sure you want to change the password?",onConfirm:H,onCancel:()=>m(!1)})]})})};export{je as default};
