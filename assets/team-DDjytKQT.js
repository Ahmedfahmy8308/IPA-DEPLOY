import{r,a as g,A as O,y as d,j as e}from"./index-C_fr4Erx.js";import{B as f}from"./button-BPxerCch.js";import{C,a as _,c as J,b as P,d as G}from"./card-DGBTJEaR.js";import{I as k}from"./input-BJXRyxCF.js";import{T as L}from"./textarea-CvlbrZRC.js";import{T as K,a as Q,b as E,c as x,d as V,e as h}from"./table-Ch59DlqH.js";import W from"./DashboardLayout-Ddo37TUH.js";import{C as X}from"./ConfirmationDialog-ooO5-hCw.js";import{U as F}from"./users-Ckn31jqV.js";import{P as Y}from"./plus-CoU1yTmG.js";import{P as Z}from"./pencil-DX-ymGHM.js";import{T as ee}from"./trash-2-BAVBfmiO.js";import{L as se,T as ae,F as ie}from"./twitter-A_LVz01T.js";import{I as te}from"./instagram-DI4NjHht.js";import"./avatar-B0KsI8hU.js";import"./chevron-down-D0hNMIBc.js";import"./menu-DGwCjKJV.js";import"./house-BDmh6YyZ.js";import"./book-open-PhjM-7Sv.js";import"./user-Rz5BT_eB.js";import"./proxy-BRfMpYjB.js";import"./index-DPloX2HJ.js";import"./settings-DmzB8q4_.js";const ke=()=>{const[D,b]=r.useState(!1),[p,T]=r.useState(!1),[w,v]=r.useState([]),[a,l]=r.useState({id:null,fullName:"",position:"",description:"",image:null,socialMediaHTML:""}),[j,m]=r.useState(null),[c,u]=r.useState({open:!1,message:"",onConfirm:null}),[H,o]=r.useState(!1),[M,n]=r.useState("");r.useEffect(()=>{y()},[]);const y=async()=>{o(!0),n("");try{const s=await fetch(g+"ProfessionalTeam",{credentials:"include"});if(!s.ok)throw new Error(`Error ${s.status}: ${s.statusText}`);const i=await s.json();v(i.data.map(t=>({id:t.id,fullName:t.fullName,position:t.position,description:t.description,image:O+t.imageUrl,socialMediaHTML:t.socialMediaHTML})))}catch{n("Failed to load team members"),d.error("Failed to load team members")}o(!1)},S=async()=>{if(o(!0),n(""),!p&&!a.image){n("Profile image is required."),o(!1),d.error("Profile image is required.");return}const s=new FormData;s.append("FullName",a.fullName),s.append("Position",a.position),s.append("Description",a.description),s.append("SocialMediaHTML",a.socialMediaHTML),a.image&&typeof a.image!="string"&&s.append("Image",a.image);try{if(p&&a.id){const i=await fetch(`${g}ProfessionalTeam/${a.id}`,{method:"PUT",body:s,credentials:"include"});if(!i.ok)throw new Error(`Error ${i.status}: ${i.statusText}`);d.success("Team member updated!")}else{const i=await fetch(g+"ProfessionalTeam",{method:"POST",body:s,credentials:"include"});if(!i.ok)throw new Error(`Error ${i.status}: ${i.statusText}`);d.success("Team member added!")}await y(),N()}catch{n("Failed to save team member"),d.error("Failed to save team member")}o(!1)},A=s=>{const i=s.target.files[0];if(i){l({...a,image:i});const t=new FileReader;t.onloadend=()=>{m(t.result)},t.readAsDataURL(i)}else typeof a.image=="string"?m(a.image):m(null)},I=async s=>{o(!0),n("");try{const i=await fetch(`${g}ProfessionalTeam/${s}`,{method:"DELETE",credentials:"include"});if(!i.ok)throw new Error(`Error ${i.status}: ${i.statusText}`);v(w.filter(t=>t.id!==s)),d.success("Team member deleted!")}catch{n("Failed to delete team member"),d.error("Failed to delete team member")}o(!1)},$=s=>{l({id:s.id,fullName:s.fullName,position:s.position,description:s.description,image:s.image,socialMediaHTML:s.socialMediaHTML}),m(s.image||null),T(!0),b(!0)},N=()=>{l({id:null,fullName:"",position:"",description:"",image:null,socialMediaHTML:""}),m(null),T(!1),b(!1)},R=s=>s?e.jsxs("div",{className:"flex gap-2 mt-2",children:[s.includes("linkedin")&&e.jsx(se,{className:"w-4 h-4 text-blue-600"}),s.includes("twitter")&&e.jsx(ae,{className:"w-4 h-4 text-blue-400"}),s.includes("facebook")&&e.jsx(ie,{className:"w-4 h-4 text-blue-800"}),s.includes("instagram")&&e.jsx(te,{className:"w-4 h-4 text-pink-600"})]}):null,U=()=>{u({open:!0,message:p?"Are you sure you want to update this team member?":"Are you sure you want to add this team member?",onConfirm:()=>z()})},z=async()=>{u({...c,open:!1}),await S()},q=s=>{u({open:!0,message:"Are you sure you want to delete this team member?",onConfirm:()=>B(s)})},B=async s=>{u({...c,open:!1}),await I(s)};return e.jsxs(W,{children:[e.jsxs("div",{className:"space-y-6",children:[H&&e.jsx("div",{className:"text-blue-600",children:"Loading..."}),M&&e.jsx("div",{className:"text-red-500",children:M}),e.jsxs(C,{children:[e.jsx(_,{className:"border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(J,{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"Team Management"]}),e.jsxs(f,{onClick:()=>{N(),b(!0)},className:"gap-2",children:[e.jsx(Y,{size:16}),"Add Team Member"]})]})}),D&&e.jsxs(P,{className:"pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),e.jsx(k,{placeholder:"John Doe",value:a.fullName,onChange:s=>l({...a,fullName:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Position"}),e.jsx(k,{placeholder:"CEO",value:a.position,onChange:s=>l({...a,position:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx(L,{placeholder:"Describe the team member's role and background...",value:a.description,onChange:s=>l({...a,description:s.target.value}),rows:4})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Social Media Links (HTML)"}),e.jsx(L,{placeholder:'<a href="https://linkedin.com">LinkedIn</a>...',value:a.socialMediaHTML,onChange:s=>l({...a,socialMediaHTML:s.target.value}),rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Profile Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"border rounded-md p-2 w-full",children:e.jsx("input",{type:"file",onChange:A,className:"w-full text-sm",accept:"image/*"})}),j&&e.jsx("img",{src:j,alt:"Preview",className:"w-16 h-16 rounded-full object-cover border"})]})]}),j&&e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:j,alt:"Profile Preview",className:"max-w-full h-32 object-contain border rounded-full"})})]})]}),e.jsxs(G,{className:"flex justify-end gap-2 pt-6 border-t",children:[e.jsx(f,{variant:"outline",onClick:N,children:"Cancel"}),e.jsx(f,{onClick:U,className:"bg-blue-600 hover:bg-blue-700",children:p?"Update Team Member":"Add Team Member"})]})]})]}),e.jsx(C,{children:e.jsx(P,{className:"p-0",children:e.jsxs(K,{children:[e.jsx(Q,{children:e.jsxs(E,{children:[e.jsx(x,{className:"w-[120px]",children:"Image"}),e.jsx(x,{children:"Name"}),e.jsx(x,{children:"Position"}),e.jsx(x,{children:"Social Media"}),e.jsx(x,{className:"text-right",children:"Actions"})]})}),e.jsx(V,{children:w.map(s=>e.jsxs(E,{children:[e.jsx(h,{children:s.image?e.jsx("img",{src:s.image,alt:s.fullName,className:"w-12 h-12 rounded-full object-cover border"}):e.jsx("div",{className:"w-12 h-12 rounded-full border flex items-center justify-center bg-gray-50",children:e.jsx(F,{className:"w-5 h-5 text-gray-400"})})}),e.jsxs(h,{children:[e.jsx("div",{className:"font-medium",children:s.fullName}),e.jsx("div",{className:"text-sm text-gray-500 line-clamp-2",children:s.description})]}),e.jsx(h,{children:e.jsx("div",{className:"font-medium",children:s.position})}),e.jsx(h,{children:R(s.socialMediaHTML)}),e.jsx(h,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>$(s),children:[e.jsx(Z,{size:14,className:"mr-1"}),"Edit"]}),e.jsxs(f,{variant:"destructive",size:"sm",onClick:()=>q(s.id),children:[e.jsx(ee,{size:14,className:"mr-1"}),"Delete"]})]})})]},s.id))})]})})})]}),c.open&&e.jsx(X,{message:c.message,onConfirm:c.onConfirm,onCancel:()=>u({...c,open:!1})})]})};export{ke as default};
