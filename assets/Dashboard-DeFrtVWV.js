import{r as a,j as e,A as h,a as l}from"./index-BrkXOzuL.js";import{C as f,a as j,c as g,e as N,b as w,d as C}from"./card-R7X0WqfW.js";import{f as v}from"./dateUtils-CoizxC4S.js";import{U as D}from"./user-B-Iiemws.js";import{C as y}from"./calendar-BKs5rWSt.js";const P=()=>{const[d,m]=a.useState([]),[u,o]=a.useState(!0),[i,c]=a.useState(null);return a.useEffect(()=>{(async()=>{try{o(!0),c(null);const r=await fetch(l+"Group/my-groups",{credentials:"include"});if(!r.ok)throw new Error("Failed to fetch groups");const x=((await r.json()).data||[]).map(async t=>{const n=await fetch(l+`Courses/${t.courseId}`);if(!n.ok)throw new Error("Failed to fetch course");return{...(await n.json()).data,groupStartDate:t.startDate,groupEndDate:t.endDate,groupName:t.name,groupDescription:t.description,instructorId:t.instructorId,groupId:t.id}}),p=await Promise.all(x);m(p)}catch(r){c(r.message||"Unknown error")}finally{o(!1)}})()},[]),u?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px]",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-primary mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),e.jsx("span",{className:"text-lg text-muted-foreground font-medium",children:"Loading..."})]}):i?e.jsx("div",{className:"text-red-500",children:i}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-blue-500",children:"Welcome To IPA ELMS "}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Your enrolled courses are displayed below. Click on any course to view details."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(s=>{var r;return e.jsxs(f,{className:"course-card overflow-hidden",children:[e.jsx("div",{className:"aspect-video bg-muted",children:e.jsx("img",{src:h+s.imageUrl,alt:s.name,className:"object-cover w-full h-full"})}),e.jsxs(j,{children:[e.jsx(g,{className:"text-xl",children:s.name}),e.jsx(N,{className:"line-clamp-2",children:s.shortDescription||s.groupDescription})]}),e.jsxs(w,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(D,{size:16,className:"mr-2"}),e.jsx("span",{children:((r=s.instructor)==null?void 0:r.name)||s.instructorId})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(y,{size:16,className:"mr-2"}),e.jsxs("span",{children:["Starts ",v(s.groupStartDate||s.scheduleStart)]})]})]}),e.jsx(C,{children:e.jsx("a",{href:`/ELMS/course?id=${s.groupId}&courseId=${s.id}`,className:"text-primary hover:underline text-sm",children:"View Course Details â†’"})})]},s.id)})})]})};export{P as default};
