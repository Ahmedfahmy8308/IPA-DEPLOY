import{r,u as v,j as e,A as L,L as x,a as i,y as o}from"./index-Cyiel408.js";/* empty css                      */function A(){const[n,f]=r.useState(""),[c,h]=r.useState(""),[l,d]=r.useState(!1),[m,u]=r.useState(null),[p,g]=r.useState(window.innerWidth<768),y=v();r.useEffect(()=>{const s=()=>{g(window.innerWidth<768)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const b=async()=>{try{const s=await fetch(i+"GeneralInfo");if(!s.ok)throw new Error("Failed to fetch logo");const a=await s.json();u(a.data.headerLogoUrl)}catch(s){console.error("Error fetching logo:",s),u(null)}};r.useEffect(()=>{b()},[]);const w=async s=>{try{const a=await fetch(`${i}auth/login`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await a.json();if(a.ok&&t&&t.success&&t.data){const N={userId:t.data.userId,username:t.data.username,email:t.data.email,expiresAt:t.data.expiresAt,role:t.data.role,firstName:t.data.firstName};localStorage.setItem("userData",JSON.stringify({...N,expiresAt:t.data.expiresAt}))}return t}catch(a){throw localStorage.removeItem("userData"),a}},j=async s=>{s.preventDefault(),d(!0);try{const a=await w({email:n,password:c});a.success?(o.success("Login successful!"),y("/"),window.location.reload()):a.message.includes("Please confirm your email")?o.error(e.jsxs("div",{children:["Please confirm your email first."," ",e.jsx("button",{onClick:async()=>{try{(await fetch(`${i}Auth/resend-confirmation-link?email=${encodeURIComponent(n)}`,{method:"POST",headers:{accept:"*/*"},credentials:"include"})).ok?o.success("Confirmation email resent successfully!"):o.error("Failed to resend confirmation email.")}catch{o.error("An error occurred while resending the email.")}},className:"text-blue-500 underline",children:"Resend Confirmation Email"})]}),{autoClose:!1}):o.error(a.message)}catch{o.error("Login failed. Please check your credentials.")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-gray-50 p-4 sm:p-0",children:e.jsxs("div",{className:`w-full ${p?"max-w-full":"max-w-md"} bg-white p-6 sm:p-10 rounded-2xl shadow-lg`,children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[m?e.jsx("img",{src:`${L}/${m}`,alt:"Logo",className:"mx-auto h-12 sm:h-14 w-auto mb-4 sm:mb-6"}):e.jsx("div",{className:"h-12 sm:h-14 w-12 sm:w-14 mx-auto mb-4 sm:mb-6 bg-gray-200 rounded-full animate-pulse"}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Welcome Back"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 sm:mt-2",children:"Login to your account"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-envelope absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base"}),e.jsx("input",{type:"email",required:!0,value:n,onChange:s=>f(s.target.value),className:"w-full pl-10 pr-3 py-2 sm:py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm placeholder-gray-400",placeholder:"Email Address",autoComplete:"email",inputMode:"email"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base"}),e.jsx("input",{type:"password",required:!0,value:c,onChange:s=>h(s.target.value),className:"w-full pl-10 pr-3 py-2 sm:py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm placeholder-gray-400",placeholder:"Password",autoComplete:"current-password"})]}),e.jsx("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:e.jsx(x,{to:"/forgot-password",className:"text-blue-600 hover:underline text-xs sm:text-sm",children:"Forgot password?"})}),e.jsx("button",{type:"submit",disabled:l,className:`w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 sm:py-3 rounded-xl transition-all duration-300 ${l?"opacity-70 cursor-not-allowed":""}`,children:l?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("span",{className:"inline-block animate-spin border-t-2 border-white border-2 rounded-full h-4 w-4 mr-2"}),"Logging in..."]}):"Login"}),e.jsxs("p",{className:"text-center text-xs sm:text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(x,{to:"/register",className:"text-blue-600 font-medium hover:underline",children:"Sign up"})]})]})]})})}export{A as default};
