import{r as o,e as j,j as e,A as N,L as f,a as n,y as r}from"./index-DNTIH_ym.js";/* empty css                      */function S(){const[l,g]=o.useState(""),[i,h]=o.useState(""),[c,d]=o.useState(!1),[u,m]=o.useState(null),x=j();o.useEffect(()=>{},[x]);const p=async()=>{try{const a=await fetch(n+"GeneralInfo");if(!a.ok)throw new Error("Failed to fetch logo");const t=await a.json();m(t.data.headerLogoUrl)}catch(a){console.error("Error fetching logo:",a),m(null)}};o.useEffect(()=>{p()},[]);const y=async a=>{try{const t=await fetch(`${n}auth/login`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),s=await t.json();if(t.ok&&s&&s.success&&s.data){const w={userId:s.data.userId,username:s.data.username,email:s.data.email,expiresAt:s.data.expiresAt,role:s.data.role,firstName:s.data.firstName};localStorage.setItem("userData",JSON.stringify({...w,expiresAt:s.data.expiresAt}))}return s}catch(t){throw localStorage.removeItem("userData"),t}},b=async a=>{a.preventDefault(),d(!0);try{const t=await y({email:l,password:i});t.success?(r.success("Login successful!"),x("/"),window.location.reload()):t.message.includes("Please confirm your email")?r.error(e.jsxs("div",{children:["Please confirm your email first."," ",e.jsx("button",{onClick:async()=>{try{(await fetch(`${n}Auth/resend-confirmation-link?email=${encodeURIComponent(l)}`,{method:"POST",headers:{accept:"*/*"},credentials:"include"})).ok?r.success("Confirmation email resent successfully!"):r.error("Failed to resend confirmation email.")}catch{r.error("An error occurred while resending the email.")}},className:"text-blue-500 underline",children:"Resend Confirmation Email"})]}),{autoClose:!1}):r.error(errorData.message)}catch{r.error("Login failed. Please check your credentials.")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-md bg-white p-10 rounded-2xl shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[u?e.jsx("img",{src:`${N}/${u}`,alt:"Logo",className:"mx-auto h-14 w-auto mb-6"}):e.jsx("div",{className:"h-14 w-14 mx-auto mb-6 bg-gray-200 rounded-full animate-pulse"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Welcome Back"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Login to your account"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-envelope absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"email",required:!0,value:l,onChange:a=>g(a.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Email Address"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"password",required:!0,value:i,onChange:a=>h(a.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Password"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("label",{className:"flex items-center text-gray-600",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded mr-2"}),"Remember me"]}),e.jsx(f,{to:"/forgot-password",className:"text-blue-600 hover:underline",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:c?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"inline-block animate-spin border-t-2 border-white border-2 rounded-full h-4 w-4 mr-2"}),"Logging in..."]}):"Login"}),e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(f,{to:"/register",className:"text-blue-600 font-medium hover:underline",children:"Sign up"})]})]})]})})}export{S as default};
