import{r,u as E,j as e,A as L,L as g,a as i,y as o}from"./index-BrkXOzuL.js";/* empty css                      */function A(){const[l,c]=r.useState(""),[m,p]=r.useState(""),[n,d]=r.useState(!1),[u,x]=r.useState(null),[f,h]=r.useState(!1),[b,y]=r.useState(window.innerWidth<768),w=E();r.useEffect(()=>{const s=()=>{y(window.innerWidth<768)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const j=async()=>{try{const s=await fetch(i+"GeneralInfo");if(!s.ok)throw new Error("Failed to fetch logo");const a=await s.json();x(a.data.headerLogoUrl)}catch(s){console.error("Error fetching logo:",s),x(null)}};r.useEffect(()=>{j()},[]);const N=async s=>{try{const a=await fetch(`${i}auth/login`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await a.json();if(a.ok&&t&&t.success&&t.data){const S={userId:t.data.userId,username:t.data.username,email:t.data.email,expiresAt:t.data.expiresAt,role:t.data.role,firstName:t.data.firstName};localStorage.setItem("userData",JSON.stringify({...S,expiresAt:t.data.expiresAt})),f?localStorage.setItem("rememberedEmail",l):localStorage.removeItem("rememberedEmail")}return t}catch(a){throw localStorage.removeItem("userData"),a}};r.useEffect(()=>{const s=localStorage.getItem("rememberedEmail");s&&(c(s),h(!0))},[]);const v=async s=>{s.preventDefault(),d(!0);try{const a=await N({email:l,password:m});a.success?(o.success("Login successful!"),w("/"),window.location.reload()):a.message.includes("Please confirm your email")?o.error(e.jsxs("div",{children:["Please confirm your email first."," ",e.jsx("button",{onClick:async()=>{try{(await fetch(`${i}Auth/resend-confirmation-link?email=${encodeURIComponent(l)}`,{method:"POST",headers:{accept:"*/*"},credentials:"include"})).ok?o.success("Confirmation email resent successfully!"):o.error("Failed to resend confirmation email.")}catch{o.error("An error occurred while resending the email.")}},className:"text-blue-500 underline",children:"Resend Confirmation Email"})]}),{autoClose:!1}):o.error(a.message)}catch{o.error("Login failed. Please check your credentials.")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-gray-50 p-4 sm:p-0",children:e.jsxs("div",{className:`w-full ${b?"max-w-full":"max-w-md"} bg-white p-6 sm:p-10 rounded-2xl shadow-lg`,children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[u?e.jsx("img",{src:`${L}/${u}`,alt:"Logo",className:"mx-auto h-12 sm:h-14 w-auto mb-4 sm:mb-6"}):e.jsx("div",{className:"h-12 sm:h-14 w-12 sm:w-14 mx-auto mb-4 sm:mb-6 bg-gray-200 rounded-full animate-pulse"}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Welcome Back"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1 sm:mt-2",children:"Login to your account"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-envelope absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base"}),e.jsx("input",{type:"email",required:!0,value:l,onChange:s=>c(s.target.value),className:"w-full pl-10 pr-3 py-2 sm:py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm placeholder-gray-400",placeholder:"Email Address",autoComplete:"email",inputMode:"email"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm sm:text-base"}),e.jsx("input",{type:"password",required:!0,value:m,onChange:s=>p(s.target.value),className:"w-full pl-10 pr-3 py-2 sm:py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm placeholder-gray-400",placeholder:"Password",autoComplete:"current-password"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[e.jsxs("label",{className:"flex items-center text-gray-600",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:s=>h(s.target.checked),className:"h-3 sm:h-4 w-3 sm:w-4 text-blue-600 border-gray-300 rounded mr-2"}),"Remember me"]}),e.jsx(g,{to:"/forgot-password",className:"text-blue-600 hover:underline text-xs sm:text-sm",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:n,className:`w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 sm:py-3 rounded-xl transition-all duration-300 ${n?"opacity-70 cursor-not-allowed":""}`,children:n?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("span",{className:"inline-block animate-spin border-t-2 border-white border-2 rounded-full h-4 w-4 mr-2"}),"Logging in..."]}):"Login"}),e.jsxs("p",{className:"text-center text-xs sm:text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(g,{to:"/register",className:"text-blue-600 font-medium hover:underline",children:"Sign up"})]})]})]})})}export{A as default};
