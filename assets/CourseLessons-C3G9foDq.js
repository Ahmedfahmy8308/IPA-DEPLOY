import{c as v,r as t,j as e,m as P,f as B,ae as E,a as y}from"./index-DPuvoll-.js";import{f as m}from"./dateUtils-CoizxC4S.js";import{B as u}from"./button-Dx5gRtPc.js";import{T as F,a as H,b as h,c as i,d as M,e as r}from"./table-C7SWgxsZ.js";import{D as z,a as G,b as O,c as R,d as _}from"./dialog-B4fLbaeO.js";import{B as q}from"./book-DLNXwFbp.js";import{U as $}from"./user-gaA5Cs8y.js";import{C as W}from"./calendar-CowpEo-K.js";import"./Combination-BqCGyTFF.js";import"./tslib.es6-BUas5LQb.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=v("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=v("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),w=t.forwardRef(({className:o,type:n,...l},a)=>e.jsx("input",{type:n,className:P("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),ref:a,...l}));w.displayName="Input";const re=()=>{var N;const[o]=B(),n=o.get("id"),l=o.get("courseId"),[a,L]=t.useState(null),[x,f]=t.useState([]),[S,g]=t.useState(!1),[j,b]=t.useState(null),[D,c]=t.useState(!1),[d,C]=t.useState(null),{toast:U}=E();t.useEffect(()=>{!n||!l||(g(!0),b(null),Promise.all([fetch(y+`GroupLesson/${n}/sessions`,{credentials:"include"}),fetch(y+`Courses/${l}`,{credentials:"include"})]).then(async([s,k])=>{if(!s.ok)throw new Error("Failed to fetch sessions");if(!k.ok)throw new Error("Failed to fetch course");const T=await s.json();f(T.data||[]);const I=await k.json();L(I.data||null)}).catch(s=>b(s.message||"Unknown error")).finally(()=>g(!1)))},[n,l]);const A=()=>{d&&(f(x.map(s=>s.id===d.id?{...s,assignmentSubmitted:!0}:s)),c(!1),U({title:"Success",description:"Assignment uploaded successfully."}))};return n?S?e.jsx("div",{className:"p-8 text-center",children:"Loading..."}):j?e.jsx("div",{className:"p-8 text-center text-red-500",children:j}):a?e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-3xl font-bold",children:a.name}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4 rounded-lg border",children:[e.jsx(q,{size:24,className:"text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Lesson"}),e.jsx("p",{className:"font-medium",children:a.name})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 p-4 rounded-lg border",children:[e.jsx($,{size:24,className:"text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Instructor"}),e.jsx("p",{className:"font-medium",children:(N=a.instructor)==null?void 0:N.name})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 p-4 rounded-lg border",children:[e.jsx(W,{size:24,className:"text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Start Date"}),e.jsx("p",{className:"font-medium",children:m(a.scheduleStart)})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Sessions"}),e.jsx("div",{className:"border rounded-md overflow-x-auto",children:e.jsxs(F,{className:"min-w-full",children:[e.jsx(H,{children:e.jsxs(h,{children:[e.jsx(i,{className:"whitespace-nowrap",children:"Date"}),e.jsx(i,{className:"text-center",children:"Session"}),e.jsx(i,{className:"text-center",children:"Recording"}),e.jsx(i,{className:"text-center",children:"Assignment"}),e.jsx(i,{className:"whitespace-nowrap",children:"Deadline"}),e.jsx(i,{className:"text-center",children:"Upload"})]})}),e.jsx(M,{children:x.length>0?x.map(s=>e.jsxs(h,{children:[e.jsx(r,{className:"whitespace-nowrap",children:m(s.sessionDate)}),e.jsx(r,{className:"text-center",children:s.videoLink&&e.jsx("a",{href:s.videoLink,target:"_blank",rel:"noopener noreferrer",className:"inline-block text-primary hover:text-primary/80",title:"Session Link",children:e.jsx(p,{className:"h-5 w-5"})})}),e.jsx(r,{className:"text-center",children:s.videoLink&&e.jsx("a",{href:s.videoLink,target:"_blank",rel:"noopener noreferrer",className:"inline-block text-primary hover:text-primary/80",title:"Recording Link",children:e.jsx(p,{className:"h-5 w-5"})})}),e.jsx(r,{className:"text-center",children:s.assignmentLink&&e.jsx("a",{href:s.assignmentLink,target:"_blank",rel:"noopener noreferrer",className:"inline-block text-primary hover:text-primary/80",title:"Assignment Link",children:e.jsx(p,{className:"h-5 w-5"})})}),e.jsx(r,{className:"whitespace-nowrap",children:m(s.assignmentDeadline)}),e.jsx(r,{className:"text-center",children:e.jsx(u,{variant:s.assignmentSubmitted?"secondary":"outline",size:"icon",className:"h-8 w-8 mx-auto",onClick:()=>{C(s),c(!0)},title:"Upload Assignment",children:e.jsx(J,{className:"h-4 w-4"})})})]},s.id)):e.jsx(h,{children:e.jsx(r,{colSpan:6,className:"text-center py-4",children:"No sessions available for this lesson."})})})]})})]}),e.jsx(z,{open:D,onOpenChange:c,children:e.jsxs(G,{className:"sm:max-w-md",children:[e.jsx(O,{children:e.jsx(R,{children:"Upload Assignment"})}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"link-type",className:"block text-sm font-medium",children:"Select Platform"}),e.jsxs("select",{id:"link-type",className:"block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[e.jsx("option",{value:"drive",children:"Google Drive"}),e.jsx("option",{value:"github",children:"GitHub"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"assignment-link",className:"block text-sm font-medium",children:"Assignment Link"}),e.jsx(w,{id:"assignment-link",type:"url",placeholder:"Paste your Google Drive or GitHub link here"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make sure the link is accessible to the instructor"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"additional-notes",className:"block text-sm font-medium",children:"Additional Notes (Optional)"}),e.jsx("textarea",{id:"additional-notes",rows:3,className:"block w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",placeholder:"Any notes for the instructor..."})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Upload your assignment for the session dated ",d&&m(d.sessionDate)]})]})}),e.jsxs(_,{children:[e.jsx(u,{type:"button",variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),e.jsx(u,{type:"button",onClick:A,children:"Submit Link"})]})]})})]}):null:e.jsx("div",{className:"flex flex-col items-center justify-center min-h-[40vh]",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md px-8 py-10 flex flex-col items-center border border-gray-200",children:[e.jsx("svg",{width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"text-gray-400 mb-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z"})}),e.jsx("div",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No available session"}),e.jsx("div",{className:"text-gray-500 text-sm",children:"Please check back later or contact support if you think this is a mistake."})]})})};export{re as default};
