import{r as t,j as e,A as g,a as j,y as d}from"./index-DO_rZ_l7.js";import{u as pe}from"./index.esm-D-YyW5SH.js";import{B as f}from"./button-DfgPzCfU.js";import{I as c}from"./input-VwQJqJ8e.js";import{L as i}from"./label-BQUGWvvp.js";import{T as h}from"./textarea-Yv0DvRVG.js";import{C as xe,a as ge,c as je,b as fe}from"./card-sRmYD3JX.js";import ye from"./DashboardLayout-N2nZCReF.js";import{C as be}from"./ConfirmationDialog-BvQ7qfi-.js";import{C as y}from"./cloud-upload-DsFL4guH.js";import{T as K}from"./trash-2-DwNDRxDC.js";import{P as Q}from"./plus-BGkcW91p.js";import"./avatar-BMY5V_Vo.js";import"./chevron-down-BekdBF97.js";import"./menu-BwW2TftG.js";import"./house-DChaXa1q.js";import"./settings-DmGeEUMi.js";import"./user-DPPTYl3C.js";import"./proxy-B_oRtJ40.js";import"./index-BzJhFMgG.js";const We=()=>{const{register:l,handleSubmit:Y,control:Ne,setValue:p,watch:x,formState:{errors:ve}}=pe(),[V,G]=t.useState(null),[q,O]=t.useState(null),[U,M]=t.useState(null),[k,J]=t.useState(null),[L,H]=t.useState(null),[m,F]=t.useState({title:"",description:""}),[u,I]=t.useState({title:"",description:""}),[A,v]=t.useState([]),[D,w]=t.useState([]),[C,T]=t.useState({open:!1,message:"",onConfirm:null}),[W,Z]=t.useState(null),[B,ee]=t.useState(null),[R,se]=t.useState(null),[X,re]=t.useState(null),[_,ie]=t.useState(null),[S,ae]=t.useState(null),[P,te]=t.useState(null);t.useEffect(()=>{(async()=>{try{const r=await fetch(j+"AboutPage");if(!r.ok)throw new Error("Failed to fetch about data");const a=(await r.json()).data;if(!a)return;Object.entries(a).forEach(([n,E])=>{p(n,E)}),G(g+a.heroImageUrl),O(g+a.aboutImageUrl),M(g+a.missionImageUrl),J(g+a.visionImageUrl),H(g+a.ceoWordImageUrl),v(a.goals||[]),w(a.values||[])}catch(r){console.error("Error fetching about data:",r)}})()},[p]),t.useEffect(()=>{v(x("goals")||[]),w(x("values")||[])},[x]);const b=(s,r)=>{T({open:!0,message:s,onConfirm:r})},le=()=>{C.onConfirm&&C.onConfirm(),T({open:!1,message:"",onConfirm:null})},oe=()=>{T({open:!1,message:"",onConfirm:null})},ce=async s=>{b("Are you sure you want to update the About page?",async()=>{try{const r=new FormData;if(Object.entries(s).forEach(([a,n])=>{Array.isArray(n)?r.append(a,JSON.stringify(n)):n!=null&&r.append(a,n)}),W&&r.append("HeroImag",W),B&&r.append("AboutImag",B),R&&r.append("MissionImag",R),X&&r.append("VisionImag",X),_&&r.append("CEOWordImag",_),S&&r.append("ProfileFile",S),!(await fetch(j+"AboutPage",{method:"PUT",body:r,credentials:"include"})).ok)throw new Error("Failed to update about page");d.success("About page updated successfully!")}catch(r){console.error("Error updating about page:",r),d.error("Failed to update about page.")}})},N=(s,r,o,a)=>{if(s.target.files&&s.target.files[0]){const n=s.target.files[0];a(n);const E=new FileReader;E.onload=z=>{var $;($=z.target)!=null&&$.result&&r(z.target.result)},E.readAsDataURL(n)}},ne=(s,r)=>{if(s.target.files&&s.target.files[0]){const o=s.target.files[0];r(o),o.type==="application/pdf"&&te(URL.createObjectURL(o))}},de=async()=>{b("Are you sure you want to add this goal?",async()=>{if(m.title&&m.description)try{const s=await fetch(j+"AboutPage/AddGoal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m),credentials:"include"});if(!s.ok)throw new Error("Failed to add goal");const o=(await s.json()).data,a=[...A,o];v(a),p("goals",a),F({title:"",description:""}),d.success("Goal added successfully!")}catch(s){console.error("Error adding goal:",s),d.error("Error adding goal!")}})},me=async s=>{b("Are you sure you want to delete this goal?",async()=>{try{if(!(await fetch(j+`AboutPage/DeleteGoal/${s}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete goal");const o=A.filter(a=>a.id!==s);v(o),p("goals",o),d.success("Goal deleted successfully!")}catch(r){console.error("Error removing goal:",r),d.error("Error deleting goal!")}})},ue=async()=>{b("Are you sure you want to add this value?",async()=>{if(u.title&&u.description)try{const s=await fetch(j+"AboutPage/AddValue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u),credentials:"include"});if(!s.ok)throw new Error("Failed to add value");const o=(await s.json()).data,a=[...D,o];w(a),p("values",a),I({title:"",description:""}),d.success("Value added successfully!")}catch(s){console.error("Error adding value:",s),d.error("Error adding value!")}})},he=async s=>{b("Are you sure you want to delete this value?",async()=>{try{if(!(await fetch(j+`AboutPage/DeleteValue/${s}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete value");const o=D.filter(a=>a.id!==s);w(o),p("values",o),d.success("Value deleted successfully!")}catch(r){console.error("Error removing value:",r),d.error("Error deleting value!")}})};return e.jsx(ye,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("form",{onSubmit:Y(ce),children:e.jsxs(xe,{className:"border-none shadow-sm mb-8",children:[e.jsx(ge,{children:e.jsx(je,{className:"text-2xl font-semibold text-gray-800",children:"About Page Editor"})}),e.jsxs(fe,{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 border-b pb-2",children:"Hero Section"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"heroTitle",children:"Hero Title"}),e.jsx(c,{id:"heroTitle",...l("heroTitle",{required:"Hero title is required"}),placeholder:"Enter hero title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"heroDescription",children:"Hero Description"}),e.jsx(h,{id:"heroDescription",...l("heroDescription",{required:"Hero description is required"}),placeholder:"Enter hero description",rows:4})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Hero Image"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlFor:"heroImage",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[V?e.jsx("img",{src:V,alt:"Hero preview",className:"w-full h-full object-cover rounded-lg"}):e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(y,{className:"w-8 h-8 mb-4 text-gray-500"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG (MAX. 5MB)"})]}),e.jsx("input",{id:"heroImage",type:"file",accept:"image/*",className:"hidden",onChange:s=>N(s,G,"heroImageUrl",Z)})]})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 border-b pb-2",children:"About Section"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"aboutTitle",children:"About Title"}),e.jsx(c,{id:"aboutTitle",...l("aboutTitle",{required:"About title is required"}),placeholder:"Enter about title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"aboutDescription",children:"About Description"}),e.jsx(h,{id:"aboutDescription",...l("aboutDescription",{required:"About description is required"}),placeholder:"Enter about description",rows:6})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"About Image"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlFor:"aboutImage",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[q?e.jsx("img",{src:q,alt:"About preview",className:"w-full h-full object-cover rounded-lg"}):e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(y,{className:"w-8 h-8 mb-4 text-gray-500"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG (MAX. 5MB)"})]}),e.jsx("input",{id:"aboutImage",type:"file",accept:"image/*",className:"hidden",onChange:s=>N(s,O,"aboutImageUrl",ee)})]})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 border-b pb-2",children:"Mission Section"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"missionTitle",children:"Mission Title"}),e.jsx(c,{id:"missionTitle",...l("missionTitle",{required:"Mission title is required"}),placeholder:"Enter mission title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"missionDescription",children:"Mission Description"}),e.jsx(h,{id:"missionDescription",...l("missionDescription",{required:"Mission description is required"}),placeholder:"Enter mission description",rows:4})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Mission Image"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlFor:"missionImage",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[U?e.jsx("img",{src:U,alt:"Mission preview",className:"w-full h-full object-cover rounded-lg"}):e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(y,{className:"w-8 h-8 mb-4 text-gray-500"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG (MAX. 5MB)"})]}),e.jsx("input",{id:"missionImage",type:"file",accept:"image/*",className:"hidden",onChange:s=>N(s,M,"missionImageUrl",se)})]})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 border-b pb-2",children:"Vision Section"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"visionTitle",children:"Vision Title"}),e.jsx(c,{id:"visionTitle",...l("visionTitle",{required:"Vision title is required"}),placeholder:"Enter vision title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"visionDescription",children:"Vision Description"}),e.jsx(h,{id:"visionDescription",...l("visionDescription",{required:"Vision description is required"}),placeholder:"Enter vision description",rows:4})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Vision Image"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlFor:"visionImage",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[k?e.jsx("img",{src:k,alt:"Vision preview",className:"w-full h-full object-cover rounded-lg"}):e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(y,{className:"w-8 h-8 mb-4 text-gray-500"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG (MAX. 5MB)"})]}),e.jsx("input",{id:"visionImage",type:"file",accept:"image/*",className:"hidden",onChange:s=>N(s,J,"visionImageUrl",re)})]})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 border-b pb-2",children:"Goals Section"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"goalsTitle",children:"Goals Title"}),e.jsx(c,{id:"goalsTitle",...l("goalsTitle",{required:"Goals title is required"}),placeholder:"Enter goals title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"goalsDescription",children:"Goals Description"}),e.jsx(h,{id:"goalsDescription",...l("goalsDescription"),placeholder:"Enter goals description",rows:3})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{children:"Goals List"}),A.map(s=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>me(s.id),className:"text-red-600 hover:text-red-700",children:e.jsx(K,{className:"h-4 w-4"})})]},s.id)),e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Add New Goal"}),e.jsx(c,{placeholder:"Goal title",value:m.title,onChange:s=>F({...m,title:s.target.value})})]}),e.jsx(h,{placeholder:"Goal description",value:m.description,onChange:s=>F({...m,description:s.target.value}),rows:2}),e.jsxs(f,{type:"button",variant:"outline",onClick:de,disabled:!m.title||!m.description,children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Add Goal"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 border-b pb-2",children:"Values Section"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"valuesTitle",children:"Values Title"}),e.jsx(c,{id:"valuesTitle",...l("valuesTitle",{required:"Values title is required"}),placeholder:"Enter values title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"valuesDescription",children:"Values Description"}),e.jsx(h,{id:"valuesDescription",...l("valuesDescription"),placeholder:"Enter values description",rows:3})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{children:"Values List"}),D.map(s=>e.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h4",{className:"font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>he(s.id),className:"text-red-600 hover:text-red-700",children:e.jsx(K,{className:"h-4 w-4"})})]},s.id)),e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Add New Value"}),e.jsx(c,{placeholder:"Value title",value:u.title,onChange:s=>I({...u,title:s.target.value})})]}),e.jsx(h,{placeholder:"Value description",value:u.description,onChange:s=>I({...u,description:s.target.value}),rows:2}),e.jsxs(f,{type:"button",variant:"outline",onClick:ue,disabled:!u.title||!u.description,children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Add Value"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 border-b pb-2",children:"CEO Section"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"ceoWordTitle",children:"CEO Section Title"}),e.jsx(c,{id:"ceoWordTitle",...l("ceoWordTitle",{required:"CEO section title is required"}),placeholder:"Enter CEO section title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"ceoName",children:"CEO Name"}),e.jsx(c,{id:"ceoName",...l("ceoName",{required:"CEO name is required"}),placeholder:"Enter CEO name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"ceoJobTitle",children:"CEO Job Title"}),e.jsx(c,{id:"ceoJobTitle",...l("ceoJobTitle",{required:"CEO job title is required"}),placeholder:"Enter CEO job title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"ceoWordDescription",children:"CEO Message"}),e.jsx(h,{id:"ceoWordDescription",...l("ceoWordDescription",{required:"CEO message is required"}),placeholder:"Enter CEO message",rows:6})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"CEO Image"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlFor:"ceoImage",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[L?e.jsx("img",{src:L,alt:"CEO preview",className:"w-full h-full object-cover rounded-lg"}):e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(y,{className:"w-8 h-8 mb-4 text-gray-500"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG (MAX. 5MB)"})]}),e.jsx("input",{id:"ceoImage",type:"file",accept:"image/*",className:"hidden",onChange:s=>N(s,H,"ceoWordImageUrl",ie)})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:"Institute Profile File"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{htmlFor:"profileFile",className:"flex flex-col items-center justify-center w-full p-8 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[e.jsx(y,{className:"w-8 h-8 mb-4 text-gray-500"}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," PDF file"]}),(P||x("profileFileUrl"))&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 mt-2",children:["Current file: ",P?S.name:x("profileFileUrl")]}),e.jsx("div",{className:"mt-2 w-full h-64 border rounded overflow-hidden bg-white flex items-center justify-center",children:e.jsx("iframe",{src:P||g+x("profileFileUrl"),title:"Current PDF",width:"100%",height:"100%",style:{border:"none"}})})]}),e.jsx("input",{id:"profileFile",type:"file",accept:".pdf",className:"hidden",onChange:s=>ne(s,ae)})]})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6",children:[e.jsx(f,{type:"button",variant:"outline",children:"Cancel"}),e.jsx(f,{type:"submit",children:"Save Changes"})]})]})]})}),C.open&&e.jsx(be,{message:C.message,onConfirm:le,onCancel:oe})]})})};export{We as default};
