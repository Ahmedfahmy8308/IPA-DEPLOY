import{r as t,b as o,a as n,y as i,j as e}from"./index-MCFfI99p.js";import{B as m}from"./button-CwOI2u3d.js";import{C as S,a as w,c as g,b as N}from"./card-Bt4J-5pX.js";import{T as v,a as E,b as u,c as a,d as F,e as r}from"./table-B_nhSqCF.js";import{C as A}from"./ConfirmationDialog-DX6FLAuy.js";const q=()=>{const[j,f]=t.useState([]),[p,l]=t.useState(!1),[x,h]=t.useState(""),[D,I]=t.useState(!1),[T,d]=t.useState(!1),[y,C]=t.useState(null),[R,$]=t.useState(!1),[B,H]=t.useState(null),[L,M]=t.useState({title:"",email:"",category:"",details:""});t.useEffect(()=>{c()},[]);const c=async()=>{l(!0);try{const s=await o.get(`${n}SupportTicket`);f(s.data.data||[])}catch{h("Failed to load tickets"),i.error("Failed to load tickets")}l(!1)},b=async s=>{l(!0);try{await o.delete(`${n}SupportTicket/${s}`),i.success("Ticket deleted successfully!"),c(),d(!1)}catch{h("Failed to delete ticket"),i.error("Failed to delete ticket")}l(!1)};return e.jsxs("div",{className:"space-y-6",children:[p&&e.jsx("div",{className:"text-blue-600",children:"Loading..."}),x&&e.jsx("div",{className:"text-red-500",children:x}),T&&e.jsx(A,{message:"Are you sure you want to delete this ticket?",onConfirm:()=>b(y),onCancel:()=>d(!1)}),e.jsxs(S,{children:[e.jsx(w,{className:"border-b flex justify-between items-center",children:e.jsx(g,{className:"text-xl font-semibold",children:"Support Tickets"})}),e.jsx(N,{className:"p-0",children:e.jsxs(v,{children:[e.jsx(E,{children:e.jsxs(u,{children:[e.jsx(a,{children:"Title"}),e.jsx(a,{children:"Email"}),e.jsx(a,{children:"Category"}),e.jsx(a,{children:"Details"}),e.jsx(a,{children:"Created At"}),e.jsx(a,{children:"Read"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(F,{children:j.map(s=>e.jsxs(u,{children:[e.jsx(r,{children:s.title}),e.jsx(r,{children:s.email}),e.jsx(r,{children:s.category}),e.jsx(r,{children:s.details}),e.jsx(r,{children:s.createdAt}),e.jsx(r,{children:s.read?"Yes":"No"}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:async()=>{try{l(!0),await o.put(`${n}SupportTicket/${s.id}/mark-read`),i.success("Ticket marked as read"),c()}catch{i.error("Failed to mark as read")}finally{l(!1)}},disabled:s.read,children:"Mark as Read"}),e.jsx(m,{variant:"destructive",size:"sm",onClick:()=>{d(!0),C(s.id)},children:"Delete"})]})})]},s.id))})]})})]})]})};export{q as default};
