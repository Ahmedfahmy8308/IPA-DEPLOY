import{j as e,r as l,m as g,b,a as N,A as D,y as j}from"./index-Cyiel408.js";import{C as O}from"./ConfirmationDialog-BeaAWITF.js";import{b as oe,B as v}from"./button-DgYdAu7Z.js";import{I as w}from"./input-CRf78HBQ.js";import{T as q}from"./textarea-w2OUwrsc.js";import{C as ce,a as de,c as me,b as W,d as xe}from"./card-Cshmeda5.js";import{T as ue,a as he,b as L,c as f,d as pe,e as u}from"./table-DgHoX4Wk.js";import je from"./DashboardLayout-DCmyQTPK.js";import{S as fe,a as ge,b as be,c as Ne,d as ve}from"./select-fbU9OZ0U.js";import{a as we,C as ye}from"./chevron-right-CVtPfjTG.js";import{P as Ce}from"./plus-GNR4J32R.js";import{L as Se}from"./link-2-DWs1wYXY.js";import{P as Pe}from"./pencil-BvH0m-3e.js";import{T as Ie}from"./trash-2-ByjrrmdF.js";import{S as F}from"./star-CxH1z7CD.js";import"./avatar-CLn9aj8o.js";import"./chevron-down-BnRArD8w.js";import"./menu-BkwydiBm.js";import"./house-CdyIYo1s.js";import"./settings-ChdQJgjG.js";import"./user-Dek8-off.js";import"./proxy-DOLLqZqS.js";import"./index-8YYtLd1D.js";import"./Combination-Byc8Pbwf.js";import"./tslib.es6-BUas5LQb.js";import"./index-DsXmMU4x.js";import"./chevron-up-BQfdJs0G.js";const K=({className:i,...r})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:g("mx-auto flex w-full justify-center",i),...r});K.displayName="Pagination";const Q=l.forwardRef(({className:i,...r},d)=>e.jsx("ul",{ref:d,className:g("flex flex-row items-center gap-1",i),...r}));Q.displayName="PaginationContent";const I=l.forwardRef(({className:i,...r},d)=>e.jsx("li",{ref:d,className:g("",i),...r}));I.displayName="PaginationItem";const T=({className:i,isActive:r,size:d="icon",...o})=>e.jsx("a",{"aria-current":r?"page":void 0,className:g(oe({variant:r?"outline":"ghost",size:d}),i),...o});T.displayName="PaginationLink";const X=({className:i,...r})=>e.jsxs(T,{"aria-label":"Go to previous page",size:"default",className:g("gap-1 pl-2.5",i),...r,children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});X.displayName="PaginationPrevious";const Y=({className:i,...r})=>e.jsxs(T,{"aria-label":"Go to next page",size:"default",className:g("gap-1 pr-2.5",i),...r,children:[e.jsx("span",{children:"Next"}),e.jsx(ye,{className:"h-4 w-4"})]});Y.displayName="PaginationNext";const ss=()=>{const[i,r]=l.useState([]),[d,o]=l.useState(!1),[E,h]=l.useState(""),[Z,H]=l.useState(!1),[U,z]=l.useState(null),[p,y]=l.useState(null);l.useEffect(()=>{o(!0),b.get(N+"instructors").then(s=>{const t=Array.isArray(s.data.data)?s.data.data:[];r(t),o(!1)}).catch(()=>{h("Failed to load instructors"),o(!1)})},[]);const[ee,k]=l.useState(!1),[C,$]=l.useState(!1),[se,B]=l.useState(null),[m,A]=l.useState(1),S=5,[a,n]=l.useState({name:"",image:null,jobTitle:"",rating:0,education:"",experience:"",reviews:0,description:"",socialMedia:""}),[_,M]=l.useState(""),ae=s=>{const t=s.target.files[0];if(!t)return;n({...a,image:t});const c=new FileReader;c.onloadend=()=>{M(typeof c.result=="string"?c.result:"")},c.readAsDataURL(t)},te=async()=>{if(o(!0),h(""),!C&&!a.image){h("Image is required."),o(!1),j.error("Image is required.");return}try{const s=new FormData;s.append("Name",a.name),s.append("JobTitle",a.jobTitle),s.append("Description",a.description),s.append("Education",a.education),s.append("Experience",a.experience),s.append("Rating",a.rating.toString()),s.append("NumberOfReviews",a.reviews.toString()),s.append("SocialMediaHTML",a.socialMedia),a.image&&typeof a.image!="string"&&s.append("Image",a.image),C?(await b.put(`${N}instructors/${se}`,s,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),j.success("Instructor updated successfully!")):(await b.post(N+"instructors",s,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0}),j.success("Instructor added successfully!"));const t=await b.get(N+"instructors");r(t.data.data),R()}catch{h("Failed to save instructor"),j.error("Failed to save instructor")}o(!1)},ie=s=>{$(!0),B(s.id),n({name:s.name,image:D+s.imageUrl||"",jobTitle:s.jobTitle,rating:s.rating,education:s.education,experience:s.experience,reviews:s.numberOfReviews,description:s.description,socialMedia:s.socialMediaHTML}),M(D+s.imageUrl||""),k(!0)},re=s=>{z(s),y("delete")},J=async()=>{o(!0),h("");try{await b.delete(`${N}instructors/${U}`,{withCredentials:!0}),r(i.filter(s=>s.id!==U)),H(!1),z(null),j.success("Instructor deleted successfully!")}catch{h("Failed to delete instructor"),j.error("Failed to delete instructor")}o(!1)},R=()=>{n({name:"",image:null,jobTitle:"",rating:0,education:"",experience:"",reviews:0,description:"",socialMedia:""}),M(""),$(!1),B(null),k(!1)},P=Math.ceil(i.length/S),V=i.slice((m-1)*S,m*S),G=s=>{const t=[],c=Math.floor(s),le=s%1>=.5;for(let x=0;x<c;x++)t.push(e.jsx(F,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},`full-${x}`));le&&t.push(e.jsx(F,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"},"half"));const ne=5-t.length;for(let x=0;x<ne;x++)t.push(e.jsx(F,{className:"w-4 h-4 text-yellow-400"},`empty-${x}`));return t};return e.jsx(je,{children:e.jsxs("div",{className:"space-y-6",children:[d&&e.jsx("div",{className:"text-blue-600",children:"Loading..."}),E&&e.jsx("div",{className:"text-red-500",children:E}),Z&&e.jsx(O,{message:"Are you sure you want to delete this instructor?",onConfirm:J,onCancel:()=>H(!1)}),e.jsxs(ce,{children:[e.jsx(de,{className:"border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(me,{className:"text-xl font-semibold",children:"Instructors Management"}),e.jsxs(v,{onClick:()=>{R(),k(!0)},className:"gap-2",children:[e.jsx(Ce,{size:16}),"Add Instructor"]})]})}),ee&&e.jsxs(W,{className:"pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Instructor Name"}),e.jsx(w,{placeholder:"Dr. John Smith",value:a.name,onChange:s=>n({...a,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Job Title"}),e.jsx(w,{placeholder:"Senior Web Developer",value:a.jobTitle,onChange:s=>n({...a,jobTitle:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Rating (0-5)"}),e.jsxs(fe,{value:a.rating.toString(),onValueChange:s=>n({...a,rating:parseFloat(s)}),children:[e.jsx(ge,{children:e.jsx(be,{placeholder:"Select rating"})}),e.jsx(Ne,{children:[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5].map(s=>e.jsxs(ve,{value:s.toString(),children:[s," ",s>0&&"stars"]},s))})]}),e.jsxs("div",{className:"flex mt-2",children:[G(Number(a.rating)),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:Number(a.rating).toFixed(1)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Number of Reviews"}),e.jsx(w,{type:"number",value:a.reviews,onChange:s=>n({...a,reviews:parseInt(s.target.value)||0})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Instructor Photo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"border rounded-md p-2 w-full",children:e.jsx("input",{type:"file",onChange:ae,className:"w-full text-sm",accept:"image/*"})}),_&&e.jsx("img",{src:_,alt:"Preview",className:"w-16 h-16 rounded-md object-cover border"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Education"}),e.jsx(w,{placeholder:"PhD in Computer Science",value:a.education,onChange:s=>n({...a,education:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Experience"}),e.jsx(w,{placeholder:"10+ years",value:a.experience,onChange:s=>n({...a,experience:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx(q,{rows:3,value:a.description,onChange:s=>n({...a,description:s.target.value}),placeholder:"Brief description about the instructor..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Social Media HTML"}),e.jsx(q,{rows:3,value:a.socialMedia,onChange:s=>n({...a,socialMedia:s.target.value}),placeholder:"Paste HTML code for social media links",className:"font-mono text-sm"}),e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(Se,{className:"w-3 h-3"}),"Tip: Use SVG icons from ",e.jsx("a",{href:"https://heroicons.com",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline",children:"Heroicons"})," or similar"]})})]})]})]}),e.jsxs(xe,{className:"flex justify-end gap-2 pt-6 border-t",children:[e.jsx(v,{variant:"outline",onClick:R,children:"Cancel"}),e.jsx(v,{onClick:()=>y(C?"edit":"add"),className:"bg-blue-600 hover:bg-blue-700",children:C?"Update Instructor":"Add Instructor"})]})]}),e.jsxs(W,{className:"p-0",children:[e.jsxs(ue,{children:[e.jsx(he,{children:e.jsxs(L,{children:[e.jsx(f,{className:"w-[80px]",children:"Photo"}),e.jsx(f,{children:"Name"}),e.jsx(f,{children:"Job Title"}),e.jsx(f,{children:"Courses"}),e.jsx(f,{children:"Rating"}),e.jsx(f,{className:"text-right",children:"Actions"})]})}),e.jsx(pe,{children:V.length>0?V.map(s=>e.jsxs(L,{children:[e.jsx(u,{children:s.imageUrl?e.jsx("img",{src:D+s.imageUrl,alt:s.name,className:"w-10 h-10 rounded-full object-cover border"}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-gray-500",children:"No photo"})})}),e.jsx(u,{className:"font-medium",children:s.name}),e.jsx(u,{children:s.jobTitle}),e.jsx(u,{children:e.jsx("div",{className:"flex flex-wrap gap-1 max-w-[200px]",children:s.courses.map((t,c)=>e.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:t},c))})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[G(s.rating),e.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",s.numberOfReviews,")"]})]})}),e.jsx(u,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(v,{variant:"outline",size:"sm",onClick:()=>ie(s),children:[e.jsx(Pe,{size:14,className:"mr-1"}),"Edit"]}),e.jsxs(v,{variant:"destructive",size:"sm",onClick:()=>re(s.id),children:[e.jsx(Ie,{size:14,className:"mr-1"}),"Delete"]})]})})]},s.id)):e.jsx(L,{children:e.jsx(u,{colSpan:6,className:"text-center py-8 text-gray-500",children:"No instructors found. Add your first instructor."})})})]}),i.length>S&&e.jsx("div",{className:"border-t p-4",children:e.jsx(K,{children:e.jsxs(Q,{children:[e.jsx(I,{children:e.jsx(X,{onClick:()=>A(s=>Math.max(s-1,1)),isActive:!1,"aria-disabled":m===1,tabIndex:m===1?-1:0})}),Array.from({length:P},(s,t)=>t+1).map(s=>e.jsx(I,{children:e.jsx(T,{isActive:s===m,onClick:()=>A(s),children:s})},s)),e.jsx(I,{children:e.jsx(Y,{onClick:()=>A(s=>Math.min(s+1,P)),isActive:!1,"aria-disabled":m===P,tabIndex:m===P?-1:0})})]})})})]})]}),p&&e.jsx(O,{message:p==="add"?"Are you sure you want to add this instructor?":p==="edit"?"Are you sure you want to update this instructor?":"Are you sure you want to delete this instructor?",onConfirm:async()=>{p==="add"||p==="edit"?await te():p==="delete"&&await J(),y(null)},onCancel:()=>y(null)})]})})};export{ss as default};
