import{r as o,j as e,A as b,L as x,y as r,a as i}from"./index-DfX6fCGM.js";/* empty css                      */function w(){const[n,g]=o.useState(""),[c,h]=o.useState(""),[d,u]=o.useState(!1),[m,f]=o.useState(null),p=()=>{const a=localStorage.getItem("userData");if(a){const s=JSON.parse(a),t=new Date(s.expiresAt).getTime(),l=new Date().getTime();t<=l&&(localStorage.removeItem("userData"),r.info("Session expired. Please log in again."))}};o.useEffect(()=>{p(),(async()=>{try{const s=await fetch(i+"/GeneralInfo");if(!s.ok)throw new Error("Failed to fetch logo");const t=await s.json();f(t.headerLogoUrl)}catch(s){console.error("Error fetching logo:",s),f(null)}})()},[]);const y=async a=>{a.preventDefault(),u(!0);try{const s=await fetch(`${i}/Auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:c})});if(s.ok){const t=await s.json();localStorage.setItem("userData",JSON.stringify(t)),r.success("Login successful!"),t.role==="SuperAdmin"?window.location.href="/admin-dashboard/index":t.role==="Student"&&(window.location.href="/")}else if(s.status===400){const t=await s.text();t.includes("Please confirm your email first")?r.error(e.jsxs("div",{children:["Please confirm your email first."," ",e.jsx("button",{onClick:async()=>{try{(await fetch(`${i}/Auth/resend-confirmation-link?email=${encodeURIComponent(n)}`,{method:"POST",headers:{accept:"*/*"}})).ok?r.success("Confirmation email resent successfully!"):r.error("Failed to resend confirmation email.")}catch{r.error("An error occurred while resending the email.")}},className:"text-blue-500 underline",children:"Resend Confirmation Email"})]}),{autoClose:!1}):r.error(t||"An error occurred.")}else r.error("Invalid email or password")}catch{r.error("Login failed. Please try again.")}finally{u(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-md bg-white p-10 rounded-2xl shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[m?e.jsx("img",{src:`${b}/${m}`,alt:"Logo",className:"mx-auto h-14 w-auto mb-6"}):e.jsx("div",{className:"h-14 w-14 mx-auto mb-6 bg-gray-200 rounded-full animate-pulse"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Welcome Back"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Login to your account"})]}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-envelope absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"email",required:!0,value:n,onChange:a=>g(a.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Email Address"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"password",required:!0,value:c,onChange:a=>h(a.target.value),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Password"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("label",{className:"flex items-center text-gray-600",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded mr-2"}),"Remember me"]}),e.jsx(x,{to:"/forgot-password",className:"text-blue-600 hover:underline",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Logging in...":"Login"}),e.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Donâ€™t have an account?"," ",e.jsx(x,{to:"/register",className:"text-blue-600 font-medium hover:underline",children:"Sign up"})]})]})]})})}function v(){return e.jsx(w,{})}export{v as default};
