import{r as l,a as f,y as i,j as a}from"./index-BFIRCOFm.js";import k from"./DashboardLayout-DG6aMarG.js";import{C as v}from"./ConfirmationDialog-CtCr8LY3.js";import{C as N,I as c}from"./index-CPYBInz1.js";import{S as y,B as b}from"./index-CpFwwJTZ.js";import{S as m}from"./index-CUeLchQi.js";import"./avatar-Chrsg1u7.js";import"./chevron-down-ClO_s6PV.js";import"./menu-D2RpImz6.js";import"./house-D_j3gpBM.js";import"./settings-CttSaOqL.js";import"./user-gTeU-oJe.js";import"./proxy-BWbRnjfR.js";import"./index-B327TQr2.js";import"./index-DcAOwtUU.js";const _=()=>{const[p,d]=l.useState(!1),[h,u]=l.useState(!1),[E,o]=l.useState(!1),[t,r]=l.useState({id:"",enrollmentEmail:"",sendEnrollmentEmail:!1,supportTicketEmail:"",sendSupportTicketEmail:!1,contactUsEmail:"",sendContactUsEmail:!1});l.useEffect(()=>{C()},[]);const C=async()=>{d(!0);try{const s=await(await fetch(`${f}NotificationAdminEmail`,{credentials:"include"})).json();s.success&&s.data?(console.log(s.data),r(s.data)):i.error(s.message||"Failed to fetch data")}catch{i.error("Failed to fetch data")}d(!1)},n=(e,s)=>{r(S=>({...S,[e]:s}))},x=()=>{o(!0)},j=()=>{if(!t.enrollmentEmail||!t.supportTicketEmail||!t.contactUsEmail)return i.error("All email fields are required."),!1;const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(t.enrollmentEmail)?e.test(t.supportTicketEmail)?e.test(t.contactUsEmail)?!0:(i.error("Contact Us Email is not a valid email address."),!1):(i.error("Support Ticket Email is not a valid email address."),!1):(i.error("Enrollment Email is not a valid email address."),!1)},g=async()=>{if(!j()){o(!1);return}u(!0),o(!1);try{const s=await(await fetch(`${f}NotificationAdminEmail`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();s.success?(i.success("Notification admin emails updated successfully"),r(s.data)):i.error(s.message||"Failed to update")}catch{i.error("Failed to update")}u(!1)};return a.jsx(k,{children:a.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[a.jsx(N,{title:"Admin Notification Emails",bordered:!0,children:a.jsx(y,{spinning:p,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block font-medium mb-1",children:"Enrollment Email"}),a.jsx(c,{value:t.enrollmentEmail,onChange:e=>n("enrollmentEmail",e.target.value),placeholder:"admin@enrollment.com",className:"mb-2"}),a.jsx(m,{checked:t.sendEnrollmentEmail,onChange:e=>n("sendEnrollmentEmail",e),checkedChildren:"Send Notifications",unCheckedChildren:"Don't Send"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block font-medium mb-1",children:"Support Ticket Email"}),a.jsx(c,{value:t.supportTicketEmail,onChange:e=>n("supportTicketEmail",e.target.value),placeholder:"admin@support.com",className:"mb-2"}),a.jsx(m,{checked:t.sendSupportTicketEmail,onChange:e=>n("sendSupportTicketEmail",e),checkedChildren:"Send Notifications",unCheckedChildren:"Don't Send"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block font-medium mb-1",children:"Contact Us Email"}),a.jsx(c,{value:t.contactUsEmail,onChange:e=>n("contactUsEmail",e.target.value),placeholder:"admin@contact.com",className:"mb-2"}),a.jsx(m,{checked:t.sendContactUsEmail,onChange:e=>n("sendContactUsEmail",e),checkedChildren:"Send Notifications",unCheckedChildren:"Don't Send"})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(b,{type:"primary",loading:h,onClick:x,children:"Save Changes"})})]})})}),E&&a.jsx(v,{message:"Are you sure you want to save these changes to the admin notification emails?",onCancel:()=>o(!1),onConfirm:g})]})})};export{_ as default};
