import{r as t,j as s,A as x,a as d}from"./index-C_fr4Erx.js";import{C as f,a as j,c as g,e as N,b as C,d as D}from"./card-DGBTJEaR.js";import{f as w}from"./dateUtils-CoizxC4S.js";import{U as v}from"./user-Rz5BT_eB.js";import{C as y}from"./calendar-BGiWRyGO.js";const R=()=>{const[l,m]=t.useState([]),[u,o]=t.useState(!0),[i,c]=t.useState(null);return t.useEffect(()=>{(async()=>{try{o(!0),c(null);const r=await fetch(d+"Group/my-groups",{credentials:"include"});if(!r.ok)throw new Error("Failed to fetch groups");const h=((await r.json()).data||[]).map(async a=>{const n=await fetch(d+`Courses/${a.courseId}`);if(!n.ok)throw new Error("Failed to fetch course");return{...(await n.json()).data,groupStartDate:a.startDate,groupEndDate:a.endDate,groupName:a.name,groupDescription:a.description,instructorId:a.instructorId,groupId:a.id}}),p=await Promise.all(h);m(p)}catch(r){c(r.message||"Unknown error")}finally{o(!1)}})()},[]),u?s.jsx("div",{children:"Loading..."}):i?s.jsx("div",{className:"text-red-500",children:i}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Welcome !! "}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Your enrolled courses are displayed below. Click on any course to view details."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(e=>{var r;return s.jsxs(f,{className:"course-card overflow-hidden",children:[s.jsx("div",{className:"aspect-video bg-muted",children:s.jsx("img",{src:x+e.imageUrl,alt:e.name,className:"object-cover w-full h-full"})}),s.jsxs(j,{children:[s.jsx(g,{className:"text-xl",children:e.name}),s.jsx(N,{className:"line-clamp-2",children:e.shortDescription||e.groupDescription})]}),s.jsxs(C,{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(v,{size:16,className:"mr-2"}),s.jsx("span",{children:((r=e.instructor)==null?void 0:r.name)||e.instructorId})]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(y,{size:16,className:"mr-2"}),s.jsxs("span",{children:["Starts ",w(e.groupStartDate||e.scheduleStart)]})]})]}),s.jsx(D,{children:s.jsx("a",{href:`/ELMS/course?id=${e.groupId}&courseId=${e.id}`,className:"text-primary hover:underline text-sm",children:"View Course Details â†’"})})]},e.id)})})]})};export{R as default};
