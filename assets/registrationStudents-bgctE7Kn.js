import{c as z,r as n,a as f,y as j,j as e,A as L}from"./index-BuH9qLac.js";import{B as h}from"./button-DZPbY1Zi.js";import{I as m}from"./input-DkHhyazO.js";import{C as G,a as $,c as B,b as F,d as Y}from"./card-DYNoIdxG.js";import{T as _,a as q,b as p,c as i,d as Z,e as c}from"./table-CzkDxvId.js";import J from"./DashboardLayout-D4aLxC2W.js";import{C as K}from"./ConfirmationDialog-B1OwtNOz.js";import{E as O}from"./eye-B2ZJKoq4.js";import{T as Q}from"./trash-2-Bwr1TCiu.js";import{U as W}from"./user-DMyrCvJX.js";import{M as X}from"./mail-CBqOm2l6.js";import{H as ee}from"./house-gAzST0f-.js";import{G as se}from"./graduation-cap-B3ILIbat.js";import{D as ae}from"./download-wekjkkhw.js";import"./avatar-CnqdaWwb.js";import"./chevron-down-B_QBse7C.js";import"./menu-Br1W04OR.js";import"./settings-CtHUhNv2.js";import"./proxy-Db_0zIRw.js";import"./index-BYfWt27V.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Ce=()=>{const[o,N]=n.useState([]),[a,g]=n.useState(null),[v,b]=n.useState(null),[R,x]=n.useState(!1),[D,w]=n.useState(null),[l,r]=n.useState({name:"",email:"",password:"",address:"",image:null,college:"",course:"",cv:null}),[U,A]=n.useState(!1),[y,C]=n.useState(""),[P,k]=n.useState("");n.useEffect(()=>{S()},[]);const S=async()=>{try{const s=await fetch(`${f}User/students`,{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch students");const t=await s.json();N(t.data)}catch{j.error("Could not load students")}},T=async s=>{if(v===s){b(null),g(null);return}try{const t=await fetch(`${f}User/students/${s}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch student");const u=await t.json();g(u.data),b(s)}catch{j.error("Could not load student details")}},M=s=>{w(s),x(!0)},H=async()=>{try{if(!(await fetch(`${f}User/students/${D}`,{method:"Delete",credentials:"include"})).ok)throw new Error("Failed to delete student");j.success("Student deleted successfully"),x(!1),w(null),S()}catch{j.error("Could not delete student"),x(!1)}},E=(s,t)=>{const u=s.target.files[0];if(!u)return;const d=new FileReader;d.onloadend=()=>{t==="image"?(C(d.result),r({...l,image:d.result})):t==="cv"&&(k(d.result),r({...l,cv:d.result}))},d.readAsDataURL(u)},V=()=>{const s={...l,id:o.length>0?Math.max(...o.map(t=>t.id))+1:1,isViewing:!1};N([...o,s]),I()},I=()=>{r({name:"",email:"",password:"",address:"",image:null,college:"",course:"",cv:null}),C(""),k(""),A(!1)};return e.jsx(J,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(G,{children:[e.jsx($,{className:"border-b",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsx(B,{className:"text-xl font-semibold",children:"Students Account Management"})})}),U&&e.jsxs(F,{className:"pt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),e.jsx(m,{placeholder:"Enter full name",value:l.name,onChange:s=>r({...l,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx(m,{type:"email",placeholder:"Enter email",value:l.email,onChange:s=>r({...l,email:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password"}),e.jsx(m,{type:"password",placeholder:"Enter password",value:l.password,onChange:s=>r({...l,password:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Address"}),e.jsx(m,{placeholder:"Enter address",value:l.address,onChange:s=>r({...l,address:s.target.value})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Profile Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"border rounded-md p-2 w-full",children:e.jsx("input",{type:"file",onChange:s=>E(s,"image"),className:"w-full text-sm",accept:"image/*"})}),y&&e.jsx("img",{src:y,alt:"Preview",className:"w-16 h-16 rounded-md object-cover border"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"College"}),e.jsx(m,{placeholder:"Enter college/faculty",value:l.college,onChange:s=>r({...l,college:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Course"}),e.jsx(m,{placeholder:"Enter course name",value:l.course,onChange:s=>r({...l,course:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"CV/Resume"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"border rounded-md p-2 w-full",children:e.jsx("input",{type:"file",onChange:s=>E(s,"cv"),className:"w-full text-sm",accept:".pdf,.doc,.docx"})}),P&&e.jsx(le,{className:"w-8 h-8 text-blue-500"})]})]})]})]}),e.jsxs(Y,{className:"flex justify-end gap-2 pt-6 border-t",children:[e.jsx(h,{variant:"outline",onClick:I,children:"Cancel"}),e.jsx(h,{onClick:V,className:"bg-blue-600 hover:bg-blue-700",children:"Add Registration"})]})]}),e.jsx(F,{className:"p-0",children:e.jsxs(_,{children:[e.jsx(q,{children:e.jsxs(p,{children:[e.jsx(i,{className:"w-[80px]",children:"ID"}),e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Email"}),e.jsx(i,{children:"Faculty"}),e.jsx(i,{children:"Department"}),e.jsx(i,{children:"Graduation Year"}),e.jsx(i,{className:"text-right",children:"Actions"})]})}),e.jsx(Z,{children:o.length>0?o.map(s=>e.jsxs(e.Fragment,{children:[e.jsxs(p,{children:[e.jsx(c,{children:s.id}),e.jsx(c,{className:"font-medium",children:s.fullName}),e.jsx(c,{children:s.email}),e.jsx(c,{children:s.faculty}),e.jsx(c,{children:s.department}),e.jsx(c,{children:s.graduationYear}),e.jsx(c,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>T(s.id),children:[e.jsx(O,{size:14,className:"mr-1"}),"View"]}),e.jsxs(h,{variant:"destructive",size:"sm",onClick:()=>M(s.id),children:[e.jsx(Q,{size:14,className:"mr-1"}),"Delete"]})]})})]},s.id),v===s.id&&a&&e.jsx(p,{className:"bg-gray-50",children:e.jsx(c,{colSpan:7,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 p-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5"}),"Personal Information"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Email:"})," ",a.email]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:"Address:"})," ",a.address]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Phone:"})," ",a.phoneNumber]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"National ID:"})," ",a.nationalId]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Academic Information"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"University:"})," ",a.university]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Faculty:"})," ",a.faculty]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Department:"})," ",a.department]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Graduation Year:"})," ",a.graduationYear]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm mb-2",children:"CV/Resume"}),e.jsxs(h,{variant:"outline",size:"sm",onClick:()=>a.cvUrl&&window.open(L+a.cvUrl,"_blank"),disabled:!a.cvUrl,children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),"Download CV"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium flex items-center gap-2",children:"Social Media"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Facebook:"})," ",a.facebookUrl]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"LinkedIn:"})," ",a.linkedInUrl]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Github:"})," ",a.githubUrl]})]})]})]})})})]})):e.jsx(p,{children:e.jsx(c,{colSpan:7,className:"text-center py-8 text-gray-500",children:"No students found."})})})]})})]}),R&&e.jsx(K,{message:"Are you sure you want to delete this student?",onConfirm:H,onCancel:()=>x(!1)})]})})};export{Ce as default};
