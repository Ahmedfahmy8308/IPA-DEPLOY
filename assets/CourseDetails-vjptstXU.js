import{c as F,u as A,i as D,r as i,j as e,b as j,a as m,y as N,A as x}from"./index-BFIRCOFm.js";import{B as E}from"./BackButton-BygGNFk5.js";import{m as l}from"./proxy-BWbRnjfR.js";import{C as I}from"./clock-DNZVvydn.js";import{S as h}from"./star-DmFawG1F.js";import{P as U}from"./phone-C11RMwgW.js";import{A as M}from"./index-B327TQr2.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=F("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),G=()=>{A();const{courseId:u}=D(),[t,v]=i.useState(null),[w,g]=i.useState(!0),[f,b]=i.useState(null),[P,$]=i.useState(0),[k,c]=i.useState(!1),[z,W]=i.useState(!1),[p,S]=i.useState("");i.useEffect(()=>{(async()=>{try{g(!0),b(null);const a=(await j.get(m+`Courses/${u}`)).data.data;if(!a)throw new Error("No course data received from the server");const o={...a,imageUrl:a.imageUrl?`${x}/${a.imageUrl}`:"",comments:a.comments?a.comments.map(d=>({...d,imageUrl:d.imageUrl?`${x}/${d.imageUrl}`:""})):[],courseType:a.courseType?{...a.courseType,imageUrl:a.courseType.imageUrl?`${x}/${a.courseType.imageUrl}`:""}:{id:0,name:"",description:"",imageUrl:""},courseInfoFontSize:a.courseInfoFontSize};v(o)}catch(r){console.error("Fetch error:",r),b(r instanceof Error?r.message:"Failed to load course details")}finally{g(!1)}})()},[u]),i.useEffect(()=>{(async()=>{try{const r=await fetch(m+"Footer");if(!r.ok)throw new Error("Failed to fetch footer data");const a=await r.json(),d=new DOMParser().parseFromString(a.data.socialMediaHTML,"text/html"),y=Array.from(d.querySelectorAll("a")).find(C=>C.href.includes("wa.me"));y&&S(y.href)}catch(r){console.error("Error fetching WhatsApp link:",r)}})()},[]);const n=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"EGP"}).format(s),L=s=>{const r={year:"numeric",month:"long",day:"numeric"};return new Date(s).toLocaleDateString("en-US",r)};return w?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx(l.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600 mx-auto mb-6"}),e.jsx(l.p,{initial:{opacity:.5},animate:{opacity:1},transition:{repeat:1/0,repeatType:"reverse",duration:1.5},className:"text-lg font-medium text-gray-600",children:"Loading course details..."})]})}):f?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:e.jsxs("div",{className:"text-center max-w-md p-8 bg-white rounded-xl shadow-lg",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-6",children:e.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Error loading course"}),e.jsx("p",{className:"text-gray-600 mb-6",children:f}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-md transition-all duration-300",children:"Try Again"})]})}):t?e.jsxs("div",{className:"bg-gray-50",children:[e.jsx(E,{}),e.jsxs("section",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/80 to-black/50 z-0"}),e.jsxs("div",{className:"relative bg-cover bg-center h-64 md:h-[40rem]",style:{backgroundImage:`url(${t.imageUrl})`},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent z-0"}),e.jsx("div",{className:"container mx-auto px-4 h-full flex items-end pb-8 md:pb-24 relative z-10",children:e.jsxs(l.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8},className:"max-w-3xl text-white",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs(l.span,{whileHover:{scale:1.05},className:"inline-flex items-center bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-medium",children:[e.jsx(I,{className:"w-3 h-3 mr-1"})," ",t.hoursCount," hours"]}),e.jsxs(l.span,{whileHover:{scale:1.05},className:"inline-flex items-center bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-medium",children:[e.jsx(h,{className:"w-3 h-3 mr-1 fill-current"})," ",t.rating.toFixed(1)," Rating"]})]}),e.jsx("h1",{className:"text-2xl md:text-5xl lg:text-6xl font-bold mb-4 leading-tight",children:t.name}),e.jsx("p",{className:"text-sm md:text-2xl text-gray-200 mb-6 leading-relaxed",children:t.shortDescription}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-start sm:items-center",children:[e.jsxs(l.button,{whileHover:{scale:1.03},whileTap:{scale:.98},onClick:()=>c(!0),className:"px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-700 text-white rounded-lg hover:from-blue-700 hover:to-indigo-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-lg transition-all duration-300 text-sm font-semibold",children:["Enroll Now - ",n(t.priceAfterDiscount)]}),t.previewUrl&&e.jsx(l.a,{whileHover:{scale:1.03},whileTap:{scale:.98},href:t.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-3 bg-white/10 backdrop-blur-sm text-white rounded-lg hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 shadow-lg transition-all duration-300 text-sm font-semibold text-center cursor-pointer",children:"Watch Preview"})]})]})})]})]}),e.jsx("div",{className:"container mx-auto px-4 py-8 relative",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"sticky top-[25px] z-10 bg-white shadow-md mb-6 -mx-4 p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n(t.priceAfterDiscount)}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("span",{className:"text-sm line-through text-gray-500 mr-2",children:n(t.priceBeforeDiscount)}),e.jsxs("span",{className:"bg-red-100 text-red-800 px-1.5 py-0.5 rounded-md text-xs font-semibold",children:[t.discountPercentage,"% OFF"]})]})]}),e.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-700 text-white rounded-lg text-sm font-semibold",children:"Enroll Now"})]})}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Course Information"}),e.jsx("div",{className:"text-gray-700 mb-4 text-sm leading-relaxed course-info-content",style:{whiteSpace:"pre-line",fontSize:t.courseInfoFontSize||void 0},dangerouslySetInnerHTML:{__html:`<style>
                  .course-info-content ul { list-style: disc !important; margin-left: 1.5em; }
                  .course-info-content ol { list-style: decimal !important; margin-left: 1.5em; }
                </style>`+t.courseInfo}}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 text-xs",children:"Start Date"}),e.jsx("p",{className:"text-gray-700 text-sm",children:L(t.scheduleStart)})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 text-xs",children:"Duration"}),e.jsxs("p",{className:"text-gray-700 text-sm",children:[t.weeksCount," weeks (",t.hoursCount," hours)"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 text-xs",children:"Schedule"}),e.jsx("p",{className:"text-gray-700 text-sm",children:t.sessionTimings})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1 text-xs",children:"Location"}),e.jsx("p",{className:"text-gray-700 text-sm",children:t.location})]})]})]}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"What You'll Learn"}),e.jsx("div",{className:"what-youll-learn-content",style:{whiteSpace:"pre-line"},dangerouslySetInnerHTML:{__html:`
                  <style>
                    .what-youll-learn-content ul {
                      background: #f8fafc;
                      border-radius: 1rem;
                      box-shadow: 0 2px 8px 0 rgba(0,0,0,0.04);
                      padding: 1.25rem 1.5rem;
                      margin-bottom: 1.5rem;
                      margin-top: 0;
                      list-style: none;
                      display: block;
                      max-width: 100%;
                    }
                    .what-youll-learn-content li {
                      display: flex;
                      align-items: center;
                      gap: 0.5rem;
                      padding: 0.5rem 0;
                      font-size: 1rem;
                      color: #334155;
                      border-bottom: 1px solid #e2e8f0;
                    }
                    .what-youll-learn-content li:last-child {
                      border-bottom: none;
                    }
                    .what-youll-learn-content li::before {
                      content: "\\2713";
                      color: #2563eb;
                      font-weight: bold;
                      font-size: 1.1em;
                      margin-right: 0.5rem;
                    }
                  </style>
                  ${t.whatYouWillLearn||""}
                `}})]}),t.comments&&t.comments.length>0&&e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Student Reviews"}),e.jsxs("div",{className:"flex flex-col mb-6",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900 mr-3",children:t.rating.toFixed(1)}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center mb-1",children:[1,2,3,4,5].map(s=>e.jsx(h,{className:`w-4 h-4 ${s<=Math.round(t.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},s))}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Based on ",t.comments.length," reviews"]})]})]}),e.jsx("div",{className:"w-full",children:[5,4,3,2,1].map(s=>{const r=t.comments.filter(o=>Math.round(o.rating)===s).length,a=r/t.comments.length*100;return e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsxs("div",{className:"w-8 text-xs text-gray-600",children:[s," star"]}),e.jsx("div",{className:"flex-1 mx-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx(l.div,{initial:{width:0},animate:{width:`${a}%`},transition:{delay:.2+(5-s)*.1},className:"h-full bg-yellow-400"})}),e.jsx("div",{className:"w-8 text-right text-xs text-gray-600",children:r})]},s)})})]}),e.jsx("div",{className:"space-y-4",children:t.comments.map(s=>e.jsxs(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"border-b border-gray-200 pb-4 last:border-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-start mb-2",children:[e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-8 h-8 rounded-full object-cover mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:s.name}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex mr-1",children:[1,2,3,4,5].map(r=>e.jsx(h,{className:`w-3 h-3 ${r<=s.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},r))}),e.jsx("span",{className:"text-xs text-gray-500",children:s.jobTitle})]})]})]}),e.jsx("p",{className:"text-gray-700 text-xs",children:s.text})]},s.id))})]}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"bg-white rounded-xl shadow-md p-6 bg-gradient-to-br from-blue-50 to-indigo-50",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3 text-sm",children:"Need help deciding?"}),e.jsx("p",{className:"text-gray-600 text-xs mb-4",children:"Our course advisors are here to help you choose the right course."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{href:p||void 0,target:"_blank",rel:"noopener noreferrer",className:`flex items-center justify-between p-3 bg-white rounded-lg shadow-sm hover:shadow-md transition-all text-sm ${p?"":"pointer-events-none opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"w-4 h-4 text-blue-600 mr-2"}),e.jsx("span",{className:"font-medium",children:"Live Chat"})]}),e.jsx("span",{className:"text-blue-600 text-xs",children:"→"})]}),e.jsxs("a",{href:"/contact",className:"flex items-center justify-between p-3 bg-white rounded-lg shadow-sm hover:shadow-md transition-all text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 text-blue-600 mr-2"}),e.jsx("span",{className:"font-medium",children:"Call Us"})]}),e.jsx("span",{className:"text-blue-600 text-xs",children:"→"})]})]})]})]})}),e.jsx(M,{children:k&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",onClick:()=>c(!1),children:e.jsxs(l.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-white rounded-xl w-full max-w-md shadow-2xl relative overflow-hidden",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-600 to-indigo-700"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:["Enroll in ",t==null?void 0:t.name]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 mr-2",children:n((t==null?void 0:t.priceAfterDiscount)||0)}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm line-through text-gray-500",children:n((t==null?void 0:t.priceBeforeDiscount)||0)}),e.jsxs("span",{className:"bg-red-100 text-red-800 px-1.5 py-0.5 rounded-md text-xs font-semibold",children:[t==null?void 0:t.discountPercentage,"% OFF"]})]})]}),e.jsxs("form",{className:"space-y-4",onSubmit:async s=>{s.preventDefault();const r=new FormData(s.target),a={courseId:(t==null?void 0:t.id)||0,name:r.get("name"),phone:r.get("phone"),email:r.get("email"),nationalId:r.get("nationalId"),university:r.get("university"),faculty:r.get("faculty"),department:r.get("department"),level:r.get("level")};try{await j.post(`${m}StudentEnrollment`,a),N.success("Enrollment successful!",{}),c(!1)}catch(o){console.error("Enrollment error:",o),N.error("Failed to enroll. Please try again.",{})}},children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-xs font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Your full name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-xs font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",placeholder:"your@email.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-xs font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",placeholder:"WhatsApp Number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"faculty",className:"block text-xs font-medium text-gray-700 mb-1",children:"Faculty"}),e.jsx("input",{type:"text",id:"faculty",name:"faculty",placeholder:"Your faculty",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"level",className:"block text-xs font-medium text-gray-700 mb-1",children:"Level"}),e.jsx("input",{type:"text",id:"level",name:"level",placeholder:"Your level (e.g. 1, 2, 3, 4)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all text-sm",required:!0})]}),e.jsx("div",{className:"pt-2",children:e.jsxs(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",className:"w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-indigo-700 text-white rounded-lg hover:from-blue-700 hover:to-indigo-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-lg text-sm font-semibold transition-all duration-300",children:["Complete Enrollment - ",n((t==null?void 0:t.priceAfterDiscount)||0)]})})]})]}),e.jsx("button",{onClick:()=>c(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:e.jsxs("div",{className:"text-center max-w-md p-8 bg-white rounded-xl shadow-lg",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 mb-6",children:e.jsx("svg",{className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Course Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The course you're looking for doesn't exist or may have been removed."}),e.jsx("a",{href:"/courses",className:"inline-block px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-md transition-all duration-300",children:"Browse Courses"})]})})};export{G as default};
