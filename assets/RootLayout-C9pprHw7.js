import{c as L,r as o,j as e,u as S,L as u,A as E,o as M,X as A,O,p as D,a as U}from"./index-MCFfI99p.js";import{u as R}from"./useQuery-CiN1UdAq.js";import{B as g}from"./button-CwOI2u3d.js";import{u as k}from"./useTranslation-CGKmQNUP.js";import{C}from"./chevron-up-CzjfrW9x.js";import{C as I}from"./chevron-down-CXWDSZLj.js";import{U as y}from"./user-n4BEbYvd.js";import{B as p,S as N}from"./settings-qNjP71dP.js";import{L as v,M as $}from"./menu-CaJIzXYd.js";import{H as z}from"./house-CAAiKLfu.js";import{C as B}from"./calendar-BBEGOKnE.js";import{I as F}from"./image-DMoOrllh.js";import{C as G}from"./circle-help-CWkSpis5.js";import{M as H}from"./mail-BqgMRNlC.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=L("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=L("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),w=()=>{const{i18n:a,t:s}=k(),[h,l]=o.useState(!1),r=o.useRef(null),m=a.language;o.useEffect(()=>{const n=x=>{r.current&&!r.current.contains(x.target)&&l(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]);const i=n=>{a.changeLanguage(n);const x=n==="ar"?"rtl":"ltr";document.documentElement.dir=x,document.documentElement.lang=n,l(!1)};return e.jsxs("div",{className:"relative",ref:r,children:[e.jsxs(g,{variant:"ghost",size:"sm",className:"flex items-center gap-1 text-gray-600 hover:text-[#0449aa]",onClick:()=>l(!h),children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{children:s(m==="en"?"language.english":"language.arabic")}),h?e.jsx(C,{className:"h-4 w-4"}):e.jsx(I,{className:"h-4 w-4"})]}),h&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-50 py-1",children:e.jsxs("div",{className:"py-1",children:[e.jsx("button",{onClick:()=>i("en"),className:`w-full text-left block px-4 py-2 text-sm ${m==="en"?"bg-gray-100 text-[#0449aa]":"text-gray-700"} hover:bg-gray-100`,children:"English"}),e.jsx("button",{onClick:()=>i("ar"),className:`w-full text-left block px-4 py-2 text-sm ${m==="ar"?"bg-gray-100 text-[#0449aa]":"text-gray-700"} hover:bg-gray-100`,children:"العربية"})]})})]})},re=()=>{const{t:a}=k(),[s,h]=o.useState({name:"",role:"",email:"",isLoggedIn:!1}),[l,r]=o.useState(!1),[m,i]=o.useState(!1),n=o.useRef(null),x=o.useRef(null),c=S(),{data:f}=R({queryKey:["generalInfo"],queryFn:async()=>{const t=await fetch(`${U}GeneralInfo`);if(!t.ok)throw new Error("Failed to fetch general info");return(await t.json()).data}});o.useEffect(()=>{const t=localStorage.getItem("userData");if(t){const d=JSON.parse(t);h({name:d.firstName,role:d.role,email:d.email,isLoggedIn:!0})}},[]),o.useEffect(()=>{const t=d=>{n.current&&!n.current.contains(d.target)&&i(!1),x.current&&l&&!x.current.contains(d.target)&&r(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[l]);const b=async()=>{try{await D(),h({name:"",role:"",email:"",isLoggedIn:!1}),i(!1),r(!1),c("/login")}catch(t){console.error("Logout failed:",t),c("/login")}},j=[{path:"/",label:"home",icon:e.jsx(z,{className:"w-5 h-5"})},{path:"/about",label:"about",icon:e.jsx(_,{className:"w-5 h-5"})},{path:"/courses",label:"courses",icon:e.jsx(p,{className:"w-5 h-5"})},{path:"/events",label:"events",icon:e.jsx(B,{className:"w-5 h-5"})},{path:"/gallery",label:"gallery",icon:e.jsx(F,{className:"w-5 h-5"})},{path:"/FAQ",label:"FAQ",icon:e.jsx(G,{className:"w-5 h-5"})},{path:"/contact",label:"contact",icon:e.jsx(H,{className:"w-5 h-5"})}];return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-50 border-b border-gray-100",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16 items-center",children:[e.jsx(u,{to:"/",className:"flex items-center hover:opacity-90 transition-opacity",children:e.jsx("img",{src:`${E}/${f==null?void 0:f.headerLogoUrl}`,alt:"Logo",className:"h-9 w-auto"})}),e.jsx("nav",{className:"hidden md:flex space-x-1",children:j.map(t=>e.jsx(M,{to:t.path,className:({isActive:d})=>`inline-flex items-center px-3 py-2 text-sm font-medium rounded-md transition-all
                    ${d?"bg-blue-50 text-blue-600":"text-gray-600 hover:text-blue-600 hover:bg-blue-50"}`,children:a(`navigation.${t.label.toLowerCase()}`)},t.path))}),e.jsxs("div",{className:"hidden md:flex items-center space-x-3",children:[e.jsx(w,{}),s.isLoggedIn?e.jsxs("div",{className:"relative",ref:n,children:[e.jsxs("button",{onClick:()=>i(!m),className:"flex items-center space-x-2 focus:outline-none group",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium text-gray-800 group-hover:text-blue-600 transition-colors",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500 group-hover:text-blue-500 transition-colors",children:s.role})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-blue-600 to-blue-400 text-white font-medium flex items-center justify-center",children:s.name.charAt(0).toUpperCase()}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-white rounded-full p-0.5",children:m?e.jsx(C,{className:"h-3 w-3 text-blue-600"}):e.jsx(I,{className:"h-3 w-3 text-gray-400 group-hover:text-blue-600 transition-colors"})})]})]}),m&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50 overflow-hidden animate-fade-in",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.email})]}),e.jsxs("div",{className:"py-1",children:[s.role==="Student"&&e.jsxs("button",{onClick:()=>{c("/userprof"),i(!1)},className:"flex w-full items-center px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(y,{className:"w-4 h-4 mr-3 text-gray-500"}),a("auth.profile")]}),s.role==="Student"&&e.jsxs("button",{onClick:()=>{c("/ELMS"),i(!1)},className:"flex w-full items-center px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(p,{className:"w-4 h-4 mr-3 text-gray-500"}),"ELMS"]}),(s.role==="Admin"||s.role==="SuperAdmin")&&e.jsxs("button",{onClick:()=>{c("/admin",{state:{directAdminNavigation:!0}}),i(!1)},className:"flex w-full items-center px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(N,{className:"w-4 h-4 mr-3 text-gray-500"}),a("auth.adminDashboard")]}),e.jsxs("button",{onClick:b,className:"flex w-full items-center px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors border-t border-gray-100",children:[e.jsx(v,{className:"w-4 h-4 mr-3 text-red-500"}),a("auth.logout")]})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{variant:"outline",asChild:!0,className:"border-gray-300 hover:bg-gray-50 text-gray-700",children:e.jsx(u,{to:"/login",children:a("auth.signIn")})}),e.jsx(g,{asChild:!0,className:"bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 shadow-sm",children:e.jsx(u,{to:"/register",children:a("auth.getStarted")})})]})]}),e.jsx("div",{className:"flex md:hidden",children:e.jsx("button",{onClick:()=>r(!l),className:"p-2 rounded-md text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition-colors focus:outline-none","aria-label":"Toggle menu",children:l?e.jsx(A,{className:"h-6 w-6"}):e.jsx($,{className:"h-6 w-6"})})})]})}),e.jsx("div",{ref:x,className:`md:hidden fixed inset-0 z-40 bg-white transform transition-transform duration-300 ease-in-out ${l?"translate-x-0":"-translate-x-full"}`,style:{top:"64px"},children:e.jsxs("div",{className:"h-full overflow-y-auto flex flex-col",children:[s.isLoggedIn&&e.jsxs("div",{className:"flex items-center px-6 py-4 border-b border-gray-100 bg-gray-50",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-600 to-blue-400 text-white font-medium flex items-center justify-center mr-3",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-800",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:s.email})]})]}),e.jsxs("div",{className:"flex-1 px-3 py-4 space-y-1",children:[j.map(t=>e.jsxs(u,{to:t.path,onClick:()=>r(!1),className:"flex items-center px-4 py-3 text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[t.icon,e.jsx("span",{className:"ml-3",children:a(`navigation.${t.label.toLowerCase()}`)})]},t.path)),s.isLoggedIn&&(s.role==="Admin"||s.role==="SuperAdmin")&&e.jsxs(u,{to:"/admin",onClick:()=>{r(!1),c("/admin",{state:{directAdminNavigation:!0}})},className:"flex items-center px-4 py-3 text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[e.jsx(N,{className:"w-5 h-5"}),e.jsx("span",{className:"ml-3",children:a("auth.adminDashboard")})]}),s.isLoggedIn&&s.role==="Student"&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{to:"/userprof",onClick:()=>r(!1),className:"flex items-center px-4 py-3 text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[e.jsx(y,{className:"w-5 h-5"}),e.jsx("span",{className:"ml-3",children:a("auth.profile")})]}),e.jsxs(u,{to:"/ELMS",onClick:()=>r(!1),className:"flex items-center px-4 py-3 text-base font-medium text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[e.jsx(p,{className:"w-5 h-5"}),e.jsx("span",{className:"ml-3",children:"ELMS"})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 bg-gray-50",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 mb-2",children:a("language.language")}),e.jsx(w,{mobile:!0})]}),e.jsx("div",{className:"px-4 py-3 border-t border-gray-100 bg-white",children:s.isLoggedIn?e.jsxs("button",{onClick:b,className:"flex items-center justify-center w-full px-4 py-3 text-base font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(v,{className:"w-5 h-5 mr-3"}),a("auth.logout")]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{variant:"outline",onClick:()=>{r(!1),c("/login")},className:"w-full",children:a("auth.signIn")}),e.jsx(g,{onClick:()=>{r(!1),c("/register")},className:"w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600",children:a("auth.getStarted")})]})})]})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 transition-opacity duration-300 md:hidden",onClick:()=>r(!1)})]}),e.jsx("main",{className:"flex-1",children:e.jsx(O,{})})]})};export{re as default};
