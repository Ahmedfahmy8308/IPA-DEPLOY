import{r as a,j as s,A as h,a as l}from"./index-BuH9qLac.js";import{C as f,a as j,c as g,e as N,b as w,d as C}from"./card-DYNoIdxG.js";import{f as v}from"./dateUtils-CoizxC4S.js";import{U as D}from"./user-DMyrCvJX.js";import{C as y}from"./calendar-DNu6MVDN.js";const R=()=>{const[d,m]=a.useState([]),[u,o]=a.useState(!0),[i,c]=a.useState(null);return a.useEffect(()=>{(async()=>{try{o(!0),c(null);const r=await fetch(l+"Group/my-groups",{credentials:"include"});if(!r.ok)throw new Error("Failed to fetch groups");const x=((await r.json()).data||[]).map(async t=>{const n=await fetch(l+`Courses/${t.courseId}`);if(!n.ok)throw new Error("Failed to fetch course");return{...(await n.json()).data,groupStartDate:t.startDate,groupEndDate:t.endDate,groupName:t.name,groupDescription:t.description,instructorId:t.instructorId,groupId:t.id}}),p=await Promise.all(x);m(p)}catch(r){c(r.message||"Unknown error")}finally{o(!1)}})()},[]),u?s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px]",children:[s.jsxs("svg",{className:"animate-spin h-8 w-8 text-primary mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),s.jsx("span",{className:"text-lg text-muted-foreground font-medium",children:"Loading..."})]}):i?s.jsx("div",{className:"text-red-500",children:i}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Welcome !! "}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Your enrolled courses are displayed below. Click on any course to view details."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(e=>{var r;return s.jsxs(f,{className:"course-card overflow-hidden",children:[s.jsx("div",{className:"aspect-video bg-muted",children:s.jsx("img",{src:h+e.imageUrl,alt:e.name,className:"object-cover w-full h-full"})}),s.jsxs(j,{children:[s.jsx(g,{className:"text-xl",children:e.name}),s.jsx(N,{className:"line-clamp-2",children:e.shortDescription||e.groupDescription})]}),s.jsxs(w,{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(D,{size:16,className:"mr-2"}),s.jsx("span",{children:((r=e.instructor)==null?void 0:r.name)||e.instructorId})]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(y,{size:16,className:"mr-2"}),s.jsxs("span",{children:["Starts ",v(e.groupStartDate||e.scheduleStart)]})]})]}),s.jsx(C,{children:s.jsx("a",{href:`/ELMS/course?id=${e.groupId}&courseId=${e.id}`,className:"text-primary hover:underline text-sm",children:"View Course Details â†’"})})]},e.id)})})]})};export{R as default};
