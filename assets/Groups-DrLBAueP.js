import{r as a,l as Ve,k as Ue,a as B,j as o,A as Ce,b as Z}from"./index-BFIRCOFm.js";import{a as Ke}from"./debounce-CfdeYEXx.js";import{d as ne}from"./dayjs.min-DXzorgZG.js";import{s as G,R as qe,a as Je,F as Q}from"./EditOutlined-BK2_iqAv.js";import{M as ve,R as Ie,a as Oe}from"./CloseOutlined-BmO1FBva.js";import{b as Ze,aM as Qe,z as oe,x as je,a as et,_ as tt,c as re,bw as xe,g as Pe,m as Ae,r as Te,e as rt,v as st,aV as nt,C as ot,q as at,ae as it,T as ct,j as lt,p as ut,i as dt,w as we,h as mt,S as Re,B as ee}from"./index-CpFwwJTZ.js";import{T as Fe,R as ft,F as $e,a as ue,E as pt}from"./Table-DEG_g8U6.js";import{D as Ge,R as ce}from"./TeamOutlined-5HVsqqXd.js";import{S as ht,I as pe,C as _e}from"./index-CPYBInz1.js";import{R as Ye}from"./SearchOutlined-DIxDe8DV.js";import{A as de,R as gt}from"./PlusOutlined-Dfs6juF3.js";import{I as Le}from"./AntdIcon-F9Ue1WPK.js";import{D as yt}from"./index-rbULvauT.js";import{T as vt}from"./index-C2WplDBO.js";import{B as xt}from"./index-CiUILxHe.js";import{S as $t}from"./index-CUeLchQi.js";import{a as bt}from"./index-CreNBxjw.js";import"./isObject-BA4qOyHg.js";import"./useClosable-DjP6elIW.js";import"./index-DcAOwtUU.js";var St={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},Ct=function(){var t=a.useRef([]),s=a.useRef(null);return a.useEffect(function(){var r=Date.now(),n=!1;t.current.forEach(function(d){if(d){n=!0;var u=d.style;u.transitionDuration=".3s, .3s, .3s, .06s",s.current&&r-s.current<100&&(u.transitionDuration="0s, 0s")}}),n&&(s.current=Date.now())}),t.current},ke=0,jt=Qe();function wt(){var e;return jt?(e=ke,ke+=1):e="TEST_OR_SSR",e}const kt=function(e){var t=a.useState(),s=Ze(t,2),r=s[0],n=s[1];return a.useEffect(function(){n("rc_progress_".concat(wt()))},[]),e||r};var Me=function(t){var s=t.bg,r=t.children;return a.createElement("div",{style:{width:"100%",height:"100%",background:s}},r)};function De(e,t){return Object.keys(e).map(function(s){var r=parseFloat(s),n="".concat(Math.floor(r*t),"%");return"".concat(e[s]," ").concat(n)})}var Mt=a.forwardRef(function(e,t){var s=e.prefixCls,r=e.color,n=e.gradientId,d=e.radius,u=e.style,f=e.ptg,m=e.strokeLinecap,l=e.strokeWidth,g=e.size,S=e.gapDegree,$=r&&oe(r)==="object",b=$?"#FFF":void 0,j=g/2,w=a.createElement("circle",{className:"".concat(s,"-circle-path"),r:d,cx:j,cy:j,stroke:b,strokeLinecap:m,strokeWidth:l,opacity:f===0?0:1,style:u,ref:t});if(!$)return w;var O="".concat(n,"-conic"),k=S?"".concat(180+S/2,"deg"):"0deg",M=De(r,(360-S)/360),P=De(r,1),A="conic-gradient(from ".concat(k,", ").concat(M.join(", "),")"),p="linear-gradient(to ".concat(S?"bottom":"top",", ").concat(P.join(", "),")");return a.createElement(a.Fragment,null,a.createElement("mask",{id:O},w),a.createElement("foreignObject",{x:0,y:0,width:g,height:g,mask:"url(#".concat(O,")")},a.createElement(Me,{bg:p},a.createElement(Me,{bg:A}))))}),ae=100,ye=function(t,s,r,n,d,u,f,m,l,g){var S=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,$=r/100*360*((360-u)/360),b=u===0?0:{bottom:0,top:180,left:90,right:-90}[f],j=(100-n)/100*s;l==="round"&&n!==100&&(j+=g/2,j>=s&&(j=s-.01));var w=ae/2;return{stroke:typeof m=="string"?m:void 0,strokeDasharray:"".concat(s,"px ").concat(t),strokeDashoffset:j+S,transform:"rotate(".concat(d+$+b,"deg)"),transformOrigin:"".concat(w,"px ").concat(w,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},Dt=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function Ne(e){var t=e??[];return Array.isArray(t)?t:[t]}var Nt=function(t){var s=je(je({},St),t),r=s.id,n=s.prefixCls,d=s.steps,u=s.strokeWidth,f=s.trailWidth,m=s.gapDegree,l=m===void 0?0:m,g=s.gapPosition,S=s.trailColor,$=s.strokeLinecap,b=s.style,j=s.className,w=s.strokeColor,O=s.percent,k=et(s,Dt),M=ae/2,P=kt(r),A="".concat(P,"-gradient"),p=M-u/2,h=Math.PI*2*p,c=l>0?90+l/2:-90,i=h*((360-l)/360),C=oe(d)==="object"?d:{count:d,gap:2},v=C.count,D=C.gap,N=Ne(O),E=Ne(w),R=E.find(function(L){return L&&oe(L)==="object"}),Y=R&&oe(R)==="object",W=Y?"butt":$,V=ye(h,i,0,100,c,l,g,S,W,u),X=Ct(),z=function(){var q=0;return N.map(function(U,H){var y=E[H]||E[E.length-1],x=ye(h,i,q,U,c,l,g,y,W,u);return q+=U,a.createElement(Mt,{key:H,color:y,ptg:U,radius:p,prefixCls:n,gradientId:A,style:x,strokeLinecap:W,strokeWidth:u,gapDegree:l,ref:function(T){X[H]=T},size:ae})}).reverse()},_=function(){var q=Math.round(v*(N[0]/100)),U=100/v,H=0;return new Array(v).fill(null).map(function(y,x){var I=x<=q-1?E[0]:S,T=I&&oe(I)==="object"?"url(#".concat(A,")"):void 0,F=ye(h,i,H,U,c,l,g,I,"butt",u,D);return H+=(i-F.strokeDashoffset+D)*100/i,a.createElement("circle",{key:x,className:"".concat(n,"-circle-path"),r:p,cx:M,cy:M,stroke:T,strokeWidth:u,opacity:1,style:F,ref:function(J){X[x]=J}})})};return a.createElement("svg",tt({className:re("".concat(n,"-circle"),j),viewBox:"0 0 ".concat(ae," ").concat(ae),style:b,id:r,role:"presentation"},k),!v&&a.createElement("circle",{className:"".concat(n,"-circle-trail"),r:p,cx:M,cy:M,stroke:S,strokeLinecap:W,strokeWidth:f||u,style:V}),v?_():z())};function te(e){return!e||e<0?0:e>100?100:e}function me({success:e,successPercent:t}){let s=t;return e&&"progress"in e&&(s=e.progress),e&&"percent"in e&&(s=e.percent),s}const Et=({percent:e,success:t,successPercent:s})=>{const r=te(me({success:t,successPercent:s}));return[r,te(te(e)-r)]},It=({success:e={},strokeColor:t})=>{const{strokeColor:s}=e;return[s||xe.green,t||null]},he=(e,t,s)=>{var r,n,d,u;let f=-1,m=-1;if(t==="step"){const l=s.steps,g=s.strokeWidth;typeof e=="string"||typeof e>"u"?(f=e==="small"?2:14,m=g??8):typeof e=="number"?[f,m]=[e,e]:[f=14,m=8]=Array.isArray(e)?e:[e.width,e.height],f*=l}else if(t==="line"){const l=s==null?void 0:s.strokeWidth;typeof e=="string"||typeof e>"u"?m=l||(e==="small"?6:8):typeof e=="number"?[f,m]=[e,e]:[f=-1,m=8]=Array.isArray(e)?e:[e.width,e.height]}else(t==="circle"||t==="dashboard")&&(typeof e=="string"||typeof e>"u"?[f,m]=e==="small"?[60,60]:[120,120]:typeof e=="number"?[f,m]=[e,e]:Array.isArray(e)&&(f=(n=(r=e[0])!==null&&r!==void 0?r:e[1])!==null&&n!==void 0?n:120,m=(u=(d=e[0])!==null&&d!==void 0?d:e[1])!==null&&u!==void 0?u:120));return[f,m]},Ot=3,Pt=e=>Ot/e*100,At=e=>{const{prefixCls:t,trailColor:s=null,strokeLinecap:r="round",gapPosition:n,gapDegree:d,width:u=120,type:f,children:m,success:l,size:g=u,steps:S}=e,[$,b]=he(g,"circle");let{strokeWidth:j}=e;j===void 0&&(j=Math.max(Pt($),6));const w={width:$,height:b,fontSize:$*.15+6},O=a.useMemo(()=>{if(d||d===0)return d;if(f==="dashboard")return 75},[d,f]),k=Et(e),M=n||f==="dashboard"&&"bottom"||void 0,P=Object.prototype.toString.call(e.strokeColor)==="[object Object]",A=It({success:l,strokeColor:e.strokeColor}),p=re(`${t}-inner`,{[`${t}-circle-gradient`]:P}),h=a.createElement(Nt,{steps:S,percent:S?k[1]:k,strokeWidth:j,trailWidth:j,strokeColor:S?A[1]:A,strokeLinecap:r,trailColor:s,prefixCls:t,gapDegree:O,gapPosition:M}),c=$<=20,i=a.createElement("div",{className:p,style:w},h,!c&&m);return c?a.createElement(Fe,{title:m},i):i},fe="--progress-line-stroke-color",We="--progress-percent",Ee=e=>{const t=e?"100%":"-100%";return new st(`antProgress${e?"RTL":"LTR"}Active`,{"0%":{transform:`translateX(${t}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${t}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},Tt=e=>{const{componentCls:t,iconCls:s}=e;return{[t]:Object.assign(Object.assign({},Te(e)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:e.fontSize},[`${t}-outer`]:{display:"inline-flex",alignItems:"center",width:"100%"},[`${t}-inner`]:{position:"relative",display:"inline-block",width:"100%",flex:1,overflow:"hidden",verticalAlign:"middle",backgroundColor:e.remainingColor,borderRadius:e.lineBorderRadius},[`${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.defaultColor}},[`${t}-success-bg, ${t}-bg`]:{position:"relative",background:e.defaultColor,borderRadius:e.lineBorderRadius,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`},[`${t}-layout-bottom`]:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",[`${t}-text`]:{width:"max-content",marginInlineStart:0,marginTop:e.marginXXS}},[`${t}-bg`]:{overflow:"hidden","&::after":{content:'""',background:{_multi_value_:!0,value:["inherit",`var(${fe})`]},height:"100%",width:`calc(1 / var(${We}) * 100%)`,display:"block"},[`&${t}-bg-inner`]:{minWidth:"max-content","&::after":{content:"none"},[`${t}-text-inner`]:{color:e.colorWhite,[`&${t}-text-bright`]:{color:"rgba(0, 0, 0, 0.45)"}}}},[`${t}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:e.colorSuccess},[`${t}-text`]:{display:"inline-block",marginInlineStart:e.marginXS,color:e.colorText,lineHeight:1,width:"2em",whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[s]:{fontSize:e.fontSize},[`&${t}-text-outer`]:{width:"max-content"},[`&${t}-text-outer${t}-text-start`]:{width:"max-content",marginInlineStart:0,marginInlineEnd:e.marginXS}},[`${t}-text-inner`]:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",marginInlineStart:0,padding:`0 ${rt(e.paddingXXS)}`,[`&${t}-text-start`]:{justifyContent:"start"},[`&${t}-text-end`]:{justifyContent:"end"}},[`&${t}-status-active`]:{[`${t}-bg::before`]:{position:"absolute",inset:0,backgroundColor:e.colorBgContainer,borderRadius:e.lineBorderRadius,opacity:0,animationName:Ee(),animationDuration:e.progressActiveMotionDuration,animationTimingFunction:e.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${t}-rtl${t}-status-active`]:{[`${t}-bg::before`]:{animationName:Ee(!0)}},[`&${t}-status-exception`]:{[`${t}-bg`]:{backgroundColor:e.colorError},[`${t}-text`]:{color:e.colorError}},[`&${t}-status-exception ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorError}},[`&${t}-status-success`]:{[`${t}-bg`]:{backgroundColor:e.colorSuccess},[`${t}-text`]:{color:e.colorSuccess}},[`&${t}-status-success ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorSuccess}}})}},Rt=e=>{const{componentCls:t,iconCls:s}=e;return{[t]:{[`${t}-circle-trail`]:{stroke:e.remainingColor},[`&${t}-circle ${t}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${t}-circle ${t}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:e.circleTextColor,fontSize:e.circleTextFontSize,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[s]:{fontSize:e.circleIconFontSize}},[`${t}-circle&-status-exception`]:{[`${t}-text`]:{color:e.colorError}},[`${t}-circle&-status-success`]:{[`${t}-text`]:{color:e.colorSuccess}}},[`${t}-inline-circle`]:{lineHeight:1,[`${t}-inner`]:{verticalAlign:"bottom"}}}},Ft=e=>{const{componentCls:t}=e;return{[t]:{[`${t}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:e.progressStepMinWidth,marginInlineEnd:e.progressStepMarginInlineEnd,backgroundColor:e.remainingColor,transition:`all ${e.motionDurationSlow}`,"&-active":{backgroundColor:e.defaultColor}}}}}},Gt=e=>{const{componentCls:t,iconCls:s}=e;return{[t]:{[`${t}-small&-line, ${t}-small&-line ${t}-text ${s}`]:{fontSize:e.fontSizeSM}}}},_t=e=>({circleTextColor:e.colorText,defaultColor:e.colorInfo,remainingColor:e.colorFillSecondary,lineBorderRadius:100,circleTextFontSize:"1em",circleIconFontSize:`${e.fontSize/e.fontSizeSM}em`}),Yt=Pe("Progress",e=>{const t=e.calc(e.marginXXS).div(2).equal(),s=Ae(e,{progressStepMarginInlineEnd:t,progressStepMinWidth:t,progressActiveMotionDuration:"2.4s"});return[Tt(s),Rt(s),Ft(s),Gt(s)]},_t);var Lt=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]]);return s};const Wt=e=>{let t=[];return Object.keys(e).forEach(s=>{const r=parseFloat(s.replace(/%/g,""));Number.isNaN(r)||t.push({key:r,value:e[s]})}),t=t.sort((s,r)=>s.key-r.key),t.map(({key:s,value:r})=>`${r} ${s}%`).join(", ")},Bt=(e,t)=>{const{from:s=xe.blue,to:r=xe.blue,direction:n=t==="rtl"?"to left":"to right"}=e,d=Lt(e,["from","to","direction"]);if(Object.keys(d).length!==0){const f=Wt(d),m=`linear-gradient(${n}, ${f})`;return{background:m,[fe]:m}}const u=`linear-gradient(${n}, ${s}, ${r})`;return{background:u,[fe]:u}},zt=e=>{const{prefixCls:t,direction:s,percent:r,size:n,strokeWidth:d,strokeColor:u,strokeLinecap:f="round",children:m,trailColor:l=null,percentPosition:g,success:S}=e,{align:$,type:b}=g,j=u&&typeof u!="string"?Bt(u,s):{[fe]:u,background:u},w=f==="square"||f==="butt"?0:void 0,O=n??[-1,d||(n==="small"?6:8)],[k,M]=he(O,"line",{strokeWidth:d}),P={backgroundColor:l||void 0,borderRadius:w},A=Object.assign(Object.assign({width:`${te(r)}%`,height:M,borderRadius:w},j),{[We]:te(r)/100}),p=me(e),h={width:`${te(p)}%`,height:M,borderRadius:w,backgroundColor:S==null?void 0:S.strokeColor},c={width:k<0?"100%":k},i=a.createElement("div",{className:`${t}-inner`,style:P},a.createElement("div",{className:re(`${t}-bg`,`${t}-bg-${b}`),style:A},b==="inner"&&m),p!==void 0&&a.createElement("div",{className:`${t}-success-bg`,style:h})),C=b==="outer"&&$==="start",v=b==="outer"&&$==="end";return b==="outer"&&$==="center"?a.createElement("div",{className:`${t}-layout-bottom`},i,m):a.createElement("div",{className:`${t}-outer`,style:c},C&&m,i,v&&m)},Ht=e=>{const{size:t,steps:s,rounding:r=Math.round,percent:n=0,strokeWidth:d=8,strokeColor:u,trailColor:f=null,prefixCls:m,children:l}=e,g=r(s*(n/100)),$=t??[t==="small"?2:14,d],[b,j]=he($,"step",{steps:s,strokeWidth:d}),w=b/s,O=Array.from({length:s});for(let k=0;k<s;k++){const M=Array.isArray(u)?u[k]:u;O[k]=a.createElement("div",{key:k,className:re(`${m}-steps-item`,{[`${m}-steps-item-active`]:k<=g-1}),style:{backgroundColor:k<=g-1?M:f,width:w,height:j}})}return a.createElement("div",{className:`${m}-steps-outer`},O,l)};var Xt=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]]);return s};const Vt=["normal","exception","active","success"],Ut=a.forwardRef((e,t)=>{const{prefixCls:s,className:r,rootClassName:n,steps:d,strokeColor:u,percent:f=0,size:m="default",showInfo:l=!0,type:g="line",status:S,format:$,style:b,percentPosition:j={}}=e,w=Xt(e,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format","style","percentPosition"]),{align:O="end",type:k="outer"}=j,M=Array.isArray(u)?u[0]:u,P=typeof u=="string"||Array.isArray(u)?u:void 0,A=a.useMemo(()=>{if(M){const z=typeof M=="string"?M:Object.values(M)[0];return new nt(z).isLight()}return!1},[u]),p=a.useMemo(()=>{var z,_;const L=me(e);return parseInt(L!==void 0?(z=L??0)===null||z===void 0?void 0:z.toString():(_=f??0)===null||_===void 0?void 0:_.toString(),10)},[f,e.success,e.successPercent]),h=a.useMemo(()=>!Vt.includes(S)&&p>=100?"success":S||"normal",[S,p]),{getPrefixCls:c,direction:i,progress:C}=a.useContext(ot),v=c("progress",s),[D,N,E]=Yt(v),R=g==="line",Y=R&&!d,W=a.useMemo(()=>{if(!l)return null;const z=me(e);let _;const L=$||(U=>`${U}%`),q=R&&A&&k==="inner";return k==="inner"||$||h!=="exception"&&h!=="success"?_=L(te(f),te(z)):h==="exception"?_=R?a.createElement(it,null):a.createElement(ct,null):h==="success"&&(_=R?a.createElement(bt,null):a.createElement(ft,null)),a.createElement("span",{className:re(`${v}-text`,{[`${v}-text-bright`]:q,[`${v}-text-${O}`]:Y,[`${v}-text-${k}`]:Y}),title:typeof _=="string"?_:void 0},_)},[l,f,p,h,g,v,$]);let V;g==="line"?V=d?a.createElement(Ht,Object.assign({},e,{strokeColor:P,prefixCls:v,steps:typeof d=="object"?d.count:d}),W):a.createElement(zt,Object.assign({},e,{strokeColor:M,prefixCls:v,direction:i,percentPosition:{align:O,type:k}}),W):(g==="circle"||g==="dashboard")&&(V=a.createElement(At,Object.assign({},e,{strokeColor:M,prefixCls:v,progressStatus:h}),W));const X=re(v,`${v}-status-${h}`,{[`${v}-${g==="dashboard"&&"circle"||g}`]:g!=="line",[`${v}-inline-circle`]:g==="circle"&&he(m,"circle")[0]<=20,[`${v}-line`]:Y,[`${v}-line-align-${O}`]:Y,[`${v}-line-position-${k}`]:Y,[`${v}-steps`]:d,[`${v}-show-info`]:l,[`${v}-${m}`]:typeof m=="string",[`${v}-rtl`]:i==="rtl"},C==null?void 0:C.className,r,n,N,E);return D(a.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},C==null?void 0:C.style),b),className:X,role:"progressbar","aria-valuenow":p,"aria-valuemin":0,"aria-valuemax":100},at(w,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),V))});var Kt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},qt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 655.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 518 759.6 444.7 759.6 362c0-137-110.8-248-247.5-248S264.7 225 264.7 362c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 901.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 641.2 432.2 610 512.2 610c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 534c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 362c0-45.9 17.9-89.1 50.3-121.6S466.3 190 512.2 190s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 362c0 45.9-17.9 89.1-50.3 121.6C601.1 516.1 558 534 512.2 534zM880 772H640c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h240c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-delete",theme:"outlined"};const Jt=e=>{const{value:t,formatter:s,precision:r,decimalSeparator:n,groupSeparator:d="",prefixCls:u}=e;let f;if(typeof s=="function")f=s(t);else{const m=String(t),l=m.match(/^(-?)(\d*)(\.(\d+))?$/);if(!l||m==="-")f=m;else{const g=l[1];let S=l[2]||"0",$=l[4]||"";S=S.replace(/\B(?=(\d{3})+(?!\d))/g,d),typeof r=="number"&&($=$.padEnd(r,"0").slice(0,r>0?r:0)),$&&($=`${n}${$}`),f=[a.createElement("span",{key:"int",className:`${u}-content-value-int`},g,S),$&&a.createElement("span",{key:"decimal",className:`${u}-content-value-decimal`},$)]}}return a.createElement("span",{className:`${u}-content-value`},f)},Zt=e=>{const{componentCls:t,marginXXS:s,padding:r,colorTextDescription:n,titleFontSize:d,colorTextHeading:u,contentFontSize:f,fontFamily:m}=e;return{[t]:Object.assign(Object.assign({},Te(e)),{[`${t}-title`]:{marginBottom:s,color:n,fontSize:d},[`${t}-skeleton`]:{paddingTop:r},[`${t}-content`]:{color:u,fontSize:f,fontFamily:m,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:s},[`${t}-content-suffix`]:{marginInlineStart:s}}})}},Qt=e=>{const{fontSizeHeading3:t,fontSize:s}=e;return{titleFontSize:s,contentFontSize:t}},er=Pe("Statistic",e=>{const t=Ae(e,{});return[Zt(t)]},Qt);var tr=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]]);return s};const ge=e=>{const{prefixCls:t,className:s,rootClassName:r,style:n,valueStyle:d,value:u=0,title:f,valueRender:m,prefix:l,suffix:g,loading:S=!1,formatter:$,precision:b,decimalSeparator:j=".",groupSeparator:w=",",onMouseEnter:O,onMouseLeave:k}=e,M=tr(e,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:P,direction:A,className:p,style:h}=lt("statistic"),c=P("statistic",t),[i,C,v]=er(c),D=a.createElement(Jt,{decimalSeparator:j,groupSeparator:w,prefixCls:c,formatter:$,precision:b,value:u}),N=re(c,{[`${c}-rtl`]:A==="rtl"},p,s,r,C,v),E=ut(M,{aria:!0,data:!0});return i(a.createElement("div",Object.assign({},E,{className:N,style:Object.assign(Object.assign({},h),n),onMouseEnter:O,onMouseLeave:k}),f&&a.createElement("div",{className:`${c}-title`},f),a.createElement(ht,{paragraph:!1,loading:S,className:`${c}-skeleton`},a.createElement("div",{style:d,className:`${c}-content`},l&&a.createElement("span",{className:`${c}-content-prefix`},l),m?m(D):D,g&&a.createElement("span",{className:`${c}-content-suffix`},g)))))},rr=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function sr(e,t){let s=e;const r=/\[[^\]]*]/g,n=(t.match(r)||[]).map(m=>m.slice(1,-1)),d=t.replace(r,"[]"),u=rr.reduce((m,[l,g])=>{if(m.includes(l)){const S=Math.floor(s/g);return s-=S*g,m.replace(new RegExp(`${l}+`,"g"),$=>{const b=$.length;return S.toString().padStart(b,"0")})}return m},d);let f=0;return u.replace(r,()=>{const m=n[f];return f+=1,m})}function nr(e,t,s){const{format:r=""}=t,n=new Date(e).getTime(),d=Date.now(),u=Math.max(s?n-d:d-n,0);return sr(u,r)}var or=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(s[r[n]]=e[r[n]]);return s};function ar(e){return new Date(e).getTime()}const Be=e=>{const{value:t,format:s="HH:mm:ss",onChange:r,onFinish:n,type:d}=e,u=or(e,["value","format","onChange","onFinish","type"]),f=d==="countdown",[m,l]=a.useState(null),g=dt(()=>{const b=Date.now(),j=ar(t);l({});const w=f?j-b:b-j;return r==null||r(w),f&&j<b?(n==null||n(),!1):!0});a.useEffect(()=>{let b;const j=()=>we.cancel(b),w=()=>{b=we(()=>{g()&&w()})};return w(),j},[t,f]),a.useEffect(()=>{l({})},[]);const S=(b,j)=>m?nr(b,Object.assign(Object.assign({},j),{format:s}),f):"-",$=b=>mt(b,{title:void 0});return a.createElement(ge,Object.assign({},u,{value:t,valueRender:$,formatter:S}))},ir=e=>a.createElement(Be,Object.assign({},e,{type:"countdown"})),cr=a.memo(ir);ge.Timer=Be;ge.Countdown=cr;function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},be.apply(this,arguments)}const lr=(e,t)=>a.createElement(Le,be({},e,{ref:t,icon:Kt})),ze=a.forwardRef(lr);function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Se.apply(this,arguments)}const ur=(e,t)=>a.createElement(Le,Se({},e,{ref:t,icon:qt})),dr=a.forwardRef(ur);var He={exports:{}};(function(e,t){(function(s,r){e.exports=r()})(Ve,function(){var s,r,n=1e3,d=6e4,u=36e5,f=864e5,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=31536e6,g=2628e6,S=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,$={years:l,months:g,days:f,hours:u,minutes:d,seconds:n,milliseconds:1,weeks:6048e5},b=function(h){return h instanceof A},j=function(h,c,i){return new A(h,i,c.$l)},w=function(h){return r.p(h)+"s"},O=function(h){return h<0},k=function(h){return O(h)?Math.ceil(h):Math.floor(h)},M=function(h){return Math.abs(h)},P=function(h,c){return h?O(h)?{negative:!0,format:""+M(h)+c}:{negative:!1,format:""+h+c}:{negative:!1,format:""}},A=function(){function h(i,C,v){var D=this;if(this.$d={},this.$l=v,i===void 0&&(this.$ms=0,this.parseFromMilliseconds()),C)return j(i*$[w(C)],this);if(typeof i=="number")return this.$ms=i,this.parseFromMilliseconds(),this;if(typeof i=="object")return Object.keys(i).forEach(function(R){D.$d[w(R)]=i[R]}),this.calMilliseconds(),this;if(typeof i=="string"){var N=i.match(S);if(N){var E=N.slice(2).map(function(R){return R!=null?Number(R):0});return this.$d.years=E[0],this.$d.months=E[1],this.$d.weeks=E[2],this.$d.days=E[3],this.$d.hours=E[4],this.$d.minutes=E[5],this.$d.seconds=E[6],this.calMilliseconds(),this}}return this}var c=h.prototype;return c.calMilliseconds=function(){var i=this;this.$ms=Object.keys(this.$d).reduce(function(C,v){return C+(i.$d[v]||0)*$[v]},0)},c.parseFromMilliseconds=function(){var i=this.$ms;this.$d.years=k(i/l),i%=l,this.$d.months=k(i/g),i%=g,this.$d.days=k(i/f),i%=f,this.$d.hours=k(i/u),i%=u,this.$d.minutes=k(i/d),i%=d,this.$d.seconds=k(i/n),i%=n,this.$d.milliseconds=i},c.toISOString=function(){var i=P(this.$d.years,"Y"),C=P(this.$d.months,"M"),v=+this.$d.days||0;this.$d.weeks&&(v+=7*this.$d.weeks);var D=P(v,"D"),N=P(this.$d.hours,"H"),E=P(this.$d.minutes,"M"),R=this.$d.seconds||0;this.$d.milliseconds&&(R+=this.$d.milliseconds/1e3,R=Math.round(1e3*R)/1e3);var Y=P(R,"S"),W=i.negative||C.negative||D.negative||N.negative||E.negative||Y.negative,V=N.format||E.format||Y.format?"T":"",X=(W?"-":"")+"P"+i.format+C.format+D.format+V+N.format+E.format+Y.format;return X==="P"||X==="-P"?"P0D":X},c.toJSON=function(){return this.toISOString()},c.format=function(i){var C=i||"YYYY-MM-DDTHH:mm:ss",v={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return C.replace(m,function(D,N){return N||String(v[D])})},c.as=function(i){return this.$ms/$[w(i)]},c.get=function(i){var C=this.$ms,v=w(i);return v==="milliseconds"?C%=1e3:C=v==="weeks"?k(C/$[v]):this.$d[v],C||0},c.add=function(i,C,v){var D;return D=C?i*$[w(C)]:b(i)?i.$ms:j(i,this).$ms,j(this.$ms+D*(v?-1:1),this)},c.subtract=function(i,C){return this.add(i,C,!0)},c.locale=function(i){var C=this.clone();return C.$l=i,C},c.clone=function(){return j(this.$ms,this)},c.humanize=function(i){return s().add(this.$ms,"ms").locale(this.$l).fromNow(!i)},c.valueOf=function(){return this.asMilliseconds()},c.milliseconds=function(){return this.get("milliseconds")},c.asMilliseconds=function(){return this.as("milliseconds")},c.seconds=function(){return this.get("seconds")},c.asSeconds=function(){return this.as("seconds")},c.minutes=function(){return this.get("minutes")},c.asMinutes=function(){return this.as("minutes")},c.hours=function(){return this.get("hours")},c.asHours=function(){return this.as("hours")},c.days=function(){return this.get("days")},c.asDays=function(){return this.as("days")},c.weeks=function(){return this.get("weeks")},c.asWeeks=function(){return this.as("weeks")},c.months=function(){return this.get("months")},c.asMonths=function(){return this.as("months")},c.years=function(){return this.get("years")},c.asYears=function(){return this.as("years")},h}(),p=function(h,c,i){return h.add(c.years()*i,"y").add(c.months()*i,"M").add(c.days()*i,"d").add(c.hours()*i,"h").add(c.minutes()*i,"m").add(c.seconds()*i,"s").add(c.milliseconds()*i,"ms")};return function(h,c,i){s=i,r=i().$utils(),i.duration=function(D,N){var E=i.locale();return j(D,{$l:E},N)},i.isDuration=b;var C=c.prototype.add,v=c.prototype.subtract;c.prototype.add=function(D,N){return b(D)?p(this,D,1):C.bind(this)(D,N)},c.prototype.subtract=function(D,N){return b(D)?p(this,D,-1):v.bind(this)(D,N)}}})})(He);var mr=He.exports;const fr=Ue(mr),pr=({visible:e,groupId:t,onClose:s,onUpdate:r})=>{const[n,d]=a.useState([]),[u,f]=a.useState([]),[m,l]=a.useState(!1),[g,S]=a.useState(""),[$,b]=a.useState(null),j=async()=>{l(!0);try{const p=await fetch(`${B}User/students`,{credentials:"include"});if(!p.ok)throw new Error("Failed to fetch students");const h=await p.json();f(h.data)}catch(p){G.error("Error fetching students"),console.error(p)}finally{l(!1)}},w=a.useCallback(async()=>{l(!0);try{const p=await fetch(B+`Group/${t}/members`,{credentials:"include"});if(!p.ok)throw new Error("Failed to fetch group members");const h=await p.json();d(h.data)}catch{G.error("Error fetching group members")}finally{l(!1)}},[t]);a.useEffect(()=>{e?(j(),w()):(d([]),f([]),S(""),b(null))},[e,t,w]);const O=async p=>{b(p);try{if(!(await fetch(B+`Group/${t}/add-student/${p}`,{method:"POST",credentials:"include",body:JSON.stringify({groupId:t,studentId:p})})).ok)throw new Error("Failed to add member");G.success("Member added successfully"),w(),r&&r()}catch{G.error("Error adding member")}finally{b(null)}},k=async p=>{b(p);try{if(!(await fetch(B+`Group/${t}/remove-student/${p}`,{method:"Delete",credentials:"include",body:JSON.stringify({groupId:t,studentId:p})})).ok)throw new Error("Failed to remove member");G.success("Member removed successfully"),w(),r&&r()}catch{G.error("Error removing member")}finally{b(null)}},M=u.filter(p=>{const h=n.some(i=>i.id===p.id),c=!g||[p.firstName,p.lastName,p.email].some(i=>i==null?void 0:i.toLowerCase().includes(g.toLowerCase()));return!h&&c}),P=[{title:"Student",key:"student",render:p=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(de,{src:Ce+p.profilePictureUrl,className:"mr-3",children:p.fullName}),o.jsxs("div",{children:[o.jsx("div",{children:p.fullName}),o.jsx("div",{className:"text-gray-500 text-xs",children:p.email})]})]})},{title:"Action",key:"action",render:p=>o.jsx(ee,{type:"primary",icon:o.jsx(ze,{}),onClick:()=>O(p.id),loading:$===p.id,children:"Add"})}],A=[{title:"Member",key:"member",render:p=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(de,{src:Ce+p.profilePictureUrl,className:"mr-3",children:p.fullName}),o.jsxs("div",{children:[o.jsx("div",{children:p.fullName}),o.jsx("div",{className:"text-gray-500 text-xs",children:p.email})]})]})},{title:"Action",key:"action",render:p=>o.jsx(ee,{danger:!0,icon:o.jsx(dr,{}),onClick:()=>k(p.id),loading:$===p.id,children:"Remove"})}];return o.jsx(ve,{title:`Manage Group Members ${t?`(Group ID: ${t})`:""}`,open:e,onCancel:s,footer:null,width:800,destroyOnClose:!0,children:o.jsxs(Re,{spinning:m,children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"font-bold mb-2",children:["Current Members (",n.length,")"]}),o.jsx($e,{columns:A,dataSource:n,rowKey:"id",pagination:!1,size:"small",loading:m,locale:{emptyText:"No members in this group"}})]}),o.jsx(Ge,{}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-2",children:"Add New Members"}),o.jsx(pe,{placeholder:"Search students by name or email...",prefix:o.jsx(Ye,{}),onChange:p=>S(p.target.value),value:g,className:"mb-4",allowClear:!0}),o.jsx($e,{columns:P,dataSource:M,rowKey:"id",pagination:{pageSize:5},size:"small",loading:m,locale:{emptyText:g?"No matching students found":"No students available"}})]})]})})};ne.extend(fr);const{Option:ie}=ue,{RangePicker:Xe}=yt,{TextArea:hr}=pe,le=({title:e,value:t,icon:s,color:r="#1890ff",isDecimal:n=!1})=>o.jsx(_e,{children:o.jsx(ge,{title:e,value:t,precision:n?1:0,valueStyle:{color:r},prefix:s})}),gr=({startDate:e,endDate:t})=>{if(!e)return null;const s=ne(),r=ne(e),n=t?ne(t):null,d=n?n.diff(r,"day"):s.diff(r,"day"),u=n?d:s.diff(r,"day"),f=n?100:Math.min(100,u/(d||1)*100),m=()=>n&&s.isAfter(n)?"exception":!n||s.isBefore(n)?"active":"normal",l=()=>n?`Started: ${r.format("MMM D, YYYY")}
Ended: ${n.format("MMM D, YYYY")}`:`Started: ${r.format("MMM D, YYYY")}
Ongoing`;return o.jsx(Fe,{title:l(),children:o.jsx(Ut,{percent:f,status:m(),showInfo:!1,strokeColor:n?s.isAfter(n)?"#ff4d4f":"#52c41a":"#1890ff",trailColor:"#f0f0f0"})})},Gr=()=>{const[e,t]=a.useState([]),[s,r]=a.useState([]),[n,d]=a.useState(!1),[u,f]=a.useState(""),[m,l]=a.useState(!1),[g,S]=a.useState(null),[$,b]=a.useState("create"),[j,w]=a.useState([]),[O,k]=a.useState([]),[M,P]=a.useState(""),[A,p]=a.useState("all"),[h,c]=a.useState(null),[i,C]=a.useState(!1),[v,D]=a.useState(null);a.useEffect(()=>{N(),E(),R()},[]),a.useEffect(()=>{let y=e;M&&(y=y.filter(x=>{var I,T;return x.name.toLowerCase().includes(M.toLowerCase())||((I=x.description)==null?void 0:I.toLowerCase().includes(M.toLowerCase()))||((T=x.course)==null?void 0:T.name.toLowerCase().includes(M.toLowerCase()))})),A!=="all"&&(y=y.filter(x=>A==="active"?x.isActive:!x.isActive)),h&&(y=y.filter(x=>{const I=new Date(x.startDate),T=new Date(h[0]),F=new Date(h[1]);return I>=T&&I<=F})),r(y)},[e,M,A,h]);const N=async()=>{d(!0);try{const x=(await Z.get(`${B}Group`)).data.data||[],I=await Promise.all(x.map(async T=>{const[F,K]=await Promise.all([Y(T.courseId),W(T.instructorId)]);return{...T,course:F,instructor:K}}));t(I)}catch{f("Failed to load groups"),G.error("Failed to load groups")}finally{d(!1)}},E=async()=>{try{const y=await Z.get(`${B}Courses`);w(y.data.data||[])}catch{G.error("Failed to load courses")}},R=async()=>{try{const y=await Z.get(`${B}InstructorManagement`);k(y.data.data||[])}catch{G.error("Failed to load instructors")}},Y=async y=>{try{return(await Z.get(`${B}Courses/${y}`)).data.data}catch{return G.error("Failed to load course"),null}},W=async y=>{try{return(await Z.get(`${B}InstructorManagement/${y}`)).data.data}catch{return G.error("Failed to load instructor"),null}},V=()=>{S(null),b("create"),l(!0)},X=y=>{S(y),b("edit"),l(!0)},z=async y=>{ve.confirm({title:"Confirm Delete",content:"Are you sure you want to delete this group?",okText:"Delete",okType:"danger",cancelText:"Cancel",onOk:async()=>{try{await Z.delete(`${B}Group/${y}`),G.success("Group deleted successfully"),N()}catch{G.error("Failed to delete group")}}})},_=y=>{D(y),C(!0)},L=async y=>{try{const{members:x,dateRange:I,...T}=y,F=y.startDate||I&&I[0]||null,K=y.endDate||I&&I[1]||null,J={...T,isActive:!!y.isActive,startDate:F?typeof F=="string"?F:F.format("YYYY-MM-DD"):null,endDate:K?typeof K=="string"?K:K.format("YYYY-MM-DD"):null};console.log("Submitting payload:",J);let se;$==="create"?(se=await Z.post(`${B}Group`,J),G.success("Group created successfully")):g&&(se=await Z.put(`${B}Group/${g.id}`,J),se.status===200?G.success("Group updated successfully"):G.error("Failed to update group")),console.log("API response:",se==null?void 0:se.data),await N(),l(!1)}catch(x){console.error("Failed to save group",x),G.error("Failed to save group")}},q=[{title:"Group Name",dataIndex:"name",key:"name",render:(y,x)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(de,{style:{backgroundColor:x.isActive?"#1890ff":"#f5222d"},icon:o.jsx(ce,{}),className:"mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:y}),x.description&&o.jsx("div",{className:"text-gray-500 text-xs truncate max-w-xs",children:x.description})]})]})},{title:"Course",key:"course",render:(y,x)=>{var I,T,F;return o.jsxs("div",{children:[((I=x.course)==null?void 0:I.name)||"-",((F=(T=x.course)==null?void 0:T.courseType)==null?void 0:F.name)&&o.jsx(vt,{color:"blue",className:"ml-2",children:x.course.courseType.name})]})}},{title:"Instructor",key:"instructor",render:(y,x)=>{var I,T;return x.instructor?o.jsxs("div",{className:"flex items-center",children:[o.jsxs(de,{size:"small",className:"mr-2",children:[(I=x.instructor.firstName)==null?void 0:I.charAt(0),(T=x.instructor.lastName)==null?void 0:T.charAt(0)]}),o.jsxs("span",{children:[x.instructor.firstName," ",x.instructor.lastName]})]}):null}},{title:"Status",dataIndex:"isActive",key:"status",render:y=>o.jsx(xt,{status:y?"success":"error",text:y?"Active":"Inactive"})},{title:"Members",key:"members",render:(y,x)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx(ce,{className:"mr-1"}),x.memberCount||0]})},{title:"Timeline",key:"timeline",render:(y,x)=>o.jsx(gr,{startDate:x.startDate,endDate:x.endDate})},{title:"Actions",key:"actions",render:(y,x)=>o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(ee,{icon:o.jsx(qe,{}),onClick:()=>X(x)}),o.jsx(ee,{icon:o.jsx(Je,{}),danger:!0,onClick:()=>z(x.id)}),o.jsx(ee,{type:"primary",icon:o.jsx(ce,{}),onClick:()=>_(x.id),children:"Members"})]})}],U=Ke(y=>{P(y)},300),H=a.useMemo(()=>{const y=e.length,x=e.filter(F=>F.isActive).length,I=y-x,T=e.length>0?Math.round(e.reduce((F,K)=>{var J;return F+(((J=K.members)==null?void 0:J.length)||0)},0)/e.length):0;return{totalGroups:y,activeGroups:x,inactiveGroups:I,avgMembers:T}},[e]);return o.jsxs("div",{className:"group-dashboard p-6",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Group Management"}),o.jsxs("div",{className:"flex justify-between items-center mt-4",children:[o.jsxs("div",{className:"flex space-x-4",children:[o.jsx(pe,{placeholder:"Search groups...",prefix:o.jsx(Ye,{}),onChange:y=>U(y.target.value),className:"w-64"}),o.jsxs(ue,{defaultValue:"all",style:{width:120},onChange:y=>p(y),children:[o.jsx(ie,{value:"all",children:"All Status"}),o.jsx(ie,{value:"active",children:"Active"}),o.jsx(ie,{value:"inactive",children:"Inactive"})]}),o.jsx(Xe,{onChange:(y,x)=>c(x),placeholder:["Start Date","End Date"]})]}),o.jsx(ee,{type:"primary",icon:o.jsx(gt,{}),onClick:V,children:"New Group"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[o.jsx(le,{title:"Total Groups",value:H.totalGroups,icon:o.jsx(ce,{}),color:"#1890ff"}),o.jsx(le,{title:"Active Groups",value:H.activeGroups,icon:o.jsx(Ie,{}),color:"#52c41a"}),o.jsx(le,{title:"Inactive Groups",value:H.inactiveGroups,icon:o.jsx(Oe,{}),color:"#f5222d"}),o.jsx(le,{title:"Avg Members",value:H.avgMembers,icon:o.jsx(ze,{}),color:"#faad14",isDecimal:!0})]}),o.jsx(_e,{children:o.jsx(Re,{spinning:n,children:u?o.jsx(pt,{description:u}):o.jsx($e,{columns:q,dataSource:s,rowKey:"id",pagination:{pageSize:10},scroll:{x:"max-content"}})})}),o.jsx(ve,{title:$==="create"?"Create New Group":"Edit Group",visible:m,onCancel:()=>l(!1),footer:null,width:800,destroyOnClose:!0,children:o.jsx(yr,{group:g,courses:j,instructors:O,onSubmit:L,actionType:$})}),v&&o.jsx(pr,{visible:i,groupId:v,onClose:()=>C(!1),onUpdate:N})]})},yr=({group:e,courses:t,instructors:s,onSubmit:r,actionType:n})=>{const[d]=Q.useForm(),[u,f]=a.useState(!1);a.useEffect(()=>{e?d.setFieldsValue({...e,courseId:e.courseId,instructorId:e.instructorId,dateRange:[e.startDate?ne(e.startDate):null,e.endDate?ne(e.endDate):null]}):d.resetFields()},[e,d]);const m=async()=>{try{f(!0);const l=await d.validateFields(),[g,S]=l.dateRange||[];await r({...l,startDate:g?g.format("YYYY-MM-DD"):null,endDate:S?S.format("YYYY-MM-DD"):null,dateRange:void 0})}catch(l){console.error("Validation failed:",l)}finally{f(!1)}};return o.jsxs(Q,{form:d,layout:"vertical",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(Q.Item,{name:"name",label:"Group Name",rules:[{required:!0,message:"Please input group name"}],children:o.jsx(pe,{placeholder:"Enter group name"})}),o.jsx(Q.Item,{name:"description",label:"Description",children:o.jsx(hr,{rows:2,placeholder:"Group description (optional)"})}),o.jsx(Q.Item,{name:"courseId",label:"Course",rules:[{required:!0,message:"Please select a course"}],children:o.jsx(ue,{placeholder:"Select course",showSearch:!0,optionFilterProp:"children",children:t.map(l=>o.jsxs(ie,{value:l.id,children:[l.name,l.courseType&&` (${l.courseType.name})`]},l.id))})}),o.jsx(Q.Item,{name:"instructorId",label:"Instructor",rules:[{required:!0,message:"Please select an instructor"}],children:o.jsx(ue,{placeholder:"Select instructor",showSearch:!0,optionFilterProp:"children",children:s.map(l=>o.jsxs(ie,{value:l.id,children:[l.firstName," ",l.lastName]},l.id))})}),o.jsx(Q.Item,{name:"dateRange",label:"Date Range",rules:[{required:!0,message:"Please select date range"}],children:o.jsx(Xe,{style:{width:"100%"}})}),o.jsx(Q.Item,{name:"isActive",label:"Status",valuePropName:"checked",children:o.jsx($t,{checkedChildren:o.jsx(Ie,{}),unCheckedChildren:o.jsx(Oe,{})})})]}),o.jsx(Ge,{}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx(ee,{onClick:()=>d.resetFields(),children:"Reset"}),o.jsx(ee,{type:"primary",onClick:m,loading:u,children:n==="create"?"Create Group":"Update Group"})]})]})};export{Gr as default};
