import{r,a as p,A as O,y as d,j as e}from"./index-Cyiel408.js";import{B as b}from"./button-DgYdAu7Z.js";import{C as y,a as _,c as J,b as P,d as G}from"./card-Cshmeda5.js";import{I as k}from"./input-CRf78HBQ.js";import{T as L}from"./textarea-w2OUwrsc.js";import{T as K,a as Q,b as E,c as x,d as V,e as h}from"./table-DgHoX4Wk.js";import W from"./DashboardLayout-DCmyQTPK.js";import{C as X}from"./ConfirmationDialog-BeaAWITF.js";import{U as F}from"./users-DJmcJz8F.js";import{P as Y}from"./plus-GNR4J32R.js";import{P as Z}from"./pencil-BvH0m-3e.js";import{T as ee}from"./trash-2-ByjrrmdF.js";import{L as se,T as ae,F as te,I as le}from"./twitter-HWhaZ5o4.js";import"./avatar-CLn9aj8o.js";import"./chevron-down-BnRArD8w.js";import"./menu-BkwydiBm.js";import"./house-CdyIYo1s.js";import"./settings-ChdQJgjG.js";import"./user-Dek8-off.js";import"./proxy-DOLLqZqS.js";import"./index-8YYtLd1D.js";const ye=()=>{const[D,j]=r.useState(!1),[f,w]=r.useState(!1),[v,T]=r.useState([]),[a,o]=r.useState({id:null,fullName:"",position:"",description:"",image:null,socialMediaHTML:""}),[g,m]=r.useState(null),[c,u]=r.useState({open:!1,message:"",onConfirm:null}),[H,i]=r.useState(!1),[M,n]=r.useState("");r.useEffect(()=>{C()},[]);const C=async()=>{i(!0),n("");try{const s=await fetch(p+"ProfessionalTeam",{credentials:"include"});if(!s.ok)throw new Error(`Error ${s.status}: ${s.statusText}`);const t=await s.json();T(t.data.map(l=>({id:l.id,fullName:l.fullName,position:l.position,description:l.description,image:O+l.imageUrl,socialMediaHTML:l.socialMediaHTML})))}catch{n("Failed to load team members"),d.error("Failed to load team members")}i(!1)},S=async()=>{if(i(!0),n(""),!f&&!a.image){n("Profile image is required."),i(!1),d.error("Profile image is required.");return}const s=new FormData;s.append("FullName",a.fullName),s.append("Position",a.position),s.append("Description",a.description),s.append("SocialMediaHTML",a.socialMediaHTML),a.image&&typeof a.image!="string"&&s.append("Image",a.image);try{if(f&&a.id){const t=await fetch(`${p}ProfessionalTeam/${a.id}`,{method:"PUT",body:s,credentials:"include"});if(!t.ok)throw new Error(`Error ${t.status}: ${t.statusText}`);d.success("Team member updated!")}else{const t=await fetch(p+"ProfessionalTeam",{method:"POST",body:s,credentials:"include"});if(!t.ok)throw new Error(`Error ${t.status}: ${t.statusText}`);d.success("Team member added!")}await C(),N()}catch{n("Failed to save team member"),d.error("Failed to save team member")}i(!1)},A=s=>{const t=s.target.files[0];if(t){o({...a,image:t});const l=new FileReader;l.onloadend=()=>{m(l.result)},l.readAsDataURL(t)}else typeof a.image=="string"?m(a.image):m(null)},I=async s=>{i(!0),n("");try{const t=await fetch(`${p}ProfessionalTeam/${s}`,{method:"DELETE",credentials:"include"});if(!t.ok)throw new Error(`Error ${t.status}: ${t.statusText}`);T(v.filter(l=>l.id!==s)),d.success("Team member deleted!")}catch{n("Failed to delete team member"),d.error("Failed to delete team member")}i(!1)},$=s=>{o({id:s.id,fullName:s.fullName,position:s.position,description:s.description,image:s.image,socialMediaHTML:s.socialMediaHTML}),m(s.image||null),w(!0),j(!0)},N=()=>{o({id:null,fullName:"",position:"",description:"",image:null,socialMediaHTML:""}),m(null),w(!1),j(!1)},R=s=>s?e.jsxs("div",{className:"flex gap-2 mt-2",children:[s.includes("linkedin")&&e.jsx(se,{className:"w-4 h-4 text-blue-600"}),s.includes("twitter")&&e.jsx(ae,{className:"w-4 h-4 text-blue-400"}),s.includes("facebook")&&e.jsx(te,{className:"w-4 h-4 text-blue-800"}),s.includes("instagram")&&e.jsx(le,{className:"w-4 h-4 text-pink-600"})]}):null,U=()=>{u({open:!0,message:f?"Are you sure you want to update this team member?":"Are you sure you want to add this team member?",onConfirm:()=>z()})},z=async()=>{u({...c,open:!1}),await S()},q=s=>{u({open:!0,message:"Are you sure you want to delete this team member?",onConfirm:()=>B(s)})},B=async s=>{u({...c,open:!1}),await I(s)};return e.jsxs(W,{children:[e.jsxs("div",{className:"space-y-8 bg-gradient-to-br from-blue-50 via-white to-blue-100 min-h-screen py-8 px-2 md:px-8",children:[H&&e.jsx("div",{className:"text-blue-600",children:"Loading..."}),M&&e.jsx("div",{className:"text-red-500",children:M}),e.jsxs(y,{className:"shadow-xl rounded-2xl border-0 bg-white/90 transition-all duration-300 hover:shadow-2xl",children:[e.jsx(_,{className:"border-b bg-gradient-to-r from-blue-700 to-blue-500 rounded-t-2xl",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(J,{className:"text-2xl font-bold flex items-center gap-3 text-white drop-shadow",children:[e.jsx(F,{className:"w-7 h-7"}),"Team Management"]}),e.jsxs(b,{onClick:()=>{N(),j(!0)},className:"gap-2 bg-gradient-to-r from-blue-600 to-blue-400 text-white font-semibold shadow hover:scale-105 transition-transform",children:[e.jsx(Y,{size:18}),"Add Team Member"]})]})}),D&&e.jsxs(P,{className:"pt-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold mb-2 text-blue-900",children:"Full Name"}),e.jsx(k,{placeholder:"John Doe",value:a.fullName,onChange:s=>o({...a,fullName:s.target.value}),className:"rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold mb-2 text-blue-900",children:"Position"}),e.jsx(k,{placeholder:"CEO",value:a.position,onChange:s=>o({...a,position:s.target.value}),className:"rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold mb-2 text-blue-900",children:"Description"}),e.jsx(L,{placeholder:"Describe the team member's role and background...",value:a.description,onChange:s=>o({...a,description:s.target.value}),rows:4,className:"rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold mb-2 text-blue-900",children:"Social Media Links (HTML)"}),e.jsx(L,{placeholder:'<a href="https://linkedin.com">LinkedIn</a>...',value:a.socialMediaHTML,onChange:s=>o({...a,socialMediaHTML:s.target.value}),rows:3,className:"rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold mb-2 text-blue-900",children:"Profile Image"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"border rounded-lg p-2 w-full bg-blue-50",children:e.jsx("input",{type:"file",onChange:A,className:"w-full text-sm",accept:"image/*"})}),g&&e.jsx("img",{src:g,alt:"Preview",className:"w-16 h-16 rounded-full object-cover border-2 border-blue-300 shadow"})]})]}),g&&e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:g,alt:"Profile Preview",className:"max-w-full h-32 object-contain border-2 border-blue-200 rounded-full shadow-lg"})})]})]}),e.jsxs(G,{className:"flex justify-end gap-3 pt-8 border-t mt-8",children:[e.jsx(b,{variant:"outline",onClick:N,className:"rounded-lg border-blue-300 text-blue-700 hover:bg-blue-50",children:"Cancel"}),e.jsx(b,{onClick:U,className:"bg-gradient-to-r from-blue-600 to-blue-400 text-white font-semibold rounded-lg shadow hover:scale-105 transition-transform",children:f?"Update Team Member":"Add Team Member"})]})]})]}),e.jsx(y,{className:"shadow-xl rounded-2xl border-0 bg-white/95 transition-all duration-300 hover:shadow-2xl",children:e.jsx(P,{className:"p-0",children:e.jsxs(K,{className:"rounded-2xl overflow-hidden",children:[e.jsx(Q,{className:"bg-gradient-to-r from-blue-700 to-blue-500 text-white",children:e.jsxs(E,{children:[e.jsx(x,{className:"w-[120px] text-white text-base font-bold",children:"Image"}),e.jsx(x,{className:"text-white text-base font-bold",children:"Name"}),e.jsx(x,{className:"text-white text-base font-bold",children:"Position"}),e.jsx(x,{className:"text-white text-base font-bold",children:"Social Media"}),e.jsx(x,{className:"text-right text-white text-base font-bold",children:"Actions"})]})}),e.jsx(V,{children:v.map(s=>e.jsxs(E,{className:"hover:bg-blue-50 transition-all",children:[e.jsx(h,{children:s.image?e.jsx("img",{src:s.image,alt:s.fullName,className:"w-12 h-12 rounded-full object-cover border-2 border-blue-300 shadow"}):e.jsx("div",{className:"w-12 h-12 rounded-full border flex items-center justify-center bg-blue-100",children:e.jsx(F,{className:"w-5 h-5 text-blue-400"})})}),e.jsxs(h,{children:[e.jsx("div",{className:"font-semibold text-blue-900",children:s.fullName}),e.jsx("div",{className:"text-sm text-blue-500 line-clamp-2",children:s.description})]}),e.jsx(h,{children:e.jsx("div",{className:"font-medium text-blue-800",children:s.position})}),e.jsx(h,{children:R(s.socialMediaHTML)}),e.jsx(h,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>$(s),className:"border-blue-300 text-blue-700 hover:bg-blue-50 rounded-lg transition",children:[e.jsx(Z,{size:14,className:"mr-1"}),"Edit"]}),e.jsxs(b,{variant:"destructive",size:"sm",onClick:()=>q(s.id),className:"rounded-lg bg-red-600 hover:bg-red-700 text-white transition",children:[e.jsx(ee,{size:14,className:"mr-1"}),"Delete"]})]})})]},s.id))})]})})})]}),c.open&&e.jsx(X,{message:c.message,onConfirm:c.onConfirm,onCancel:()=>u({...c,open:!1})})]})};export{ye as default};
